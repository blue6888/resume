import{d as F,r as A,c as G,o as J,a as S,b as T,e as m,w as V,v as j,n as Y,f as D,t as N}from"./vendor-q4_JwtHI.js";import{A as W,G as g,C as P,B as U}from"./vendor-pixi-js-CqIIzDVx.js";import{_ as w,m as M}from"./vendor-matter-js-BQ72DKUX.js";import{G as z,T as q}from"./vendor-tweenjs-BtMkXI7v.js";const X=(h,e)=>{const x=h.__vccOpts||h;for(const[t,a]of e)x[t]=a;return x};(function(h,e){const x=E,t=h();for(;;)try{if(parseInt(x(227))/1+-parseInt(x(226))/2+parseInt(x(224))/3*(-parseInt(x(225))/4)+parseInt(x(231))/5+parseInt(x(230))/6*(-parseInt(x(229))/7)+parseInt(x(223))/8*(-parseInt(x(228))/9)+parseInt(x(232))/10===e)break;t.push(t.shift())}catch{t.push(t.shift())}})(v,596509);function E(h,e){const x=v();return E=function(t,a){return t=t-223,x[t]},E(h,e)}function H(){const h=o=>{const f=o.reduce((_,n)=>_+n,0);return o.map(_=>_/f)},e={low:{_10:[8.9,3,1.4,1.1,1,.5,1,1.1,1.4,3,8.9]},middle:{_10:[22,5,2,1.4,.6,.4,.6,1.4,2,5,22]},high:{_10:[76,10,3,.9,.3,.2,.3,.9,3,10,76]}},x={_10:h([1,10,45,120,210,252,210,120,45,10,1])};return{resText:e,probabilities:x,colors:{_10:[1357990,440020,3718648,5195493,9133302,59135,9133302,5195493,3718648,440020,1357990]},shadows:{_10:[1020292,561586,959977,4405450,7153881,42956,7153881,4405450,959977,561586,1020292]}}}const O=new Map([[10,{pins:{rows:12,startY:24,gap:24,pinRadius:4},ballConfig:{radius:6,air:.12}}]]);function v(){const h=["3384582ufNsSq","5316315xCmVJx","9439520nWsDCh","8vXxlhY","2290791qbAZUo","4ZHFNDg","1269980OTedsE","555744bxOZlX","33894bTNsGp","7rPmUPM"];return v=function(){return h},v()}const i=C;(function(h,e){const x=C,t=h();for(;;)try{if(parseInt(x(221))/1+parseInt(x(153))/2*(-parseInt(x(171))/3)+parseInt(x(224))/4+parseInt(x(241))/5+parseInt(x(209))/6+parseInt(x(206))/7*(parseInt(x(182))/8)+-parseInt(x(180))/9===e)break;t.push(t.shift())}catch{t.push(t.shift())}})(I,618492);function I(){const h=["removeChild","delete","setGameRes","width","Runner","maxCount","dealCollisions","level","rows","ballParamsMap","style","forEach","getShadow","Body","label","timing","timeScale","213tnWPBi","pinAnimal","ballConfig","roundRect","setBallConfig","angle","firstY","engine","text","35810514gzfgJe","log","88tlRVJx","res-","add","Events","length","clear","fill","min","radius","resBoxMap","recordArr","app","roundShape","appendChild","createRoundedRect","center","now","boxWidth","ball","positionIterations","addXPower","canvas","resBoxAnimal","ticker","590807jjEbkc","startsWith","getText","6782442skUrpE","createElement","boxHeight","#000","Engine","recordCount","ballRadius","显示游戏结果事件","addRecord","position","stage","run","1096993brcPJn","pinParams","createPinsAndResultBoxes","2407108mcYTcp","runner","listenCollisions","stackBox","getProbability","world","start","scale","init","popCallback","pinsMatter","getChildByLabel","onComplete","set","createResultBox","tickerFn","pinsGfx","5102015eEYJDR","findResultArea","circleRadius","setLevel","tweenGroup","row-","isNaN","circle","startY","get","addChild","mouseover","pairs","createBall","recordCallback","devicePixelRatio","children","getBg","gap","setPopCb","Composite","mouseout","destroy","res-text-","create","rotation","Bodies","nonCollideGroup","push","remove","height","5086ffjqxx"];return I=function(){return h},I()}function C(h,e){const x=I();return C=function(t,a){return t=t-151,x[t]},C(h,e)}const{colors:Z,shadows:K,resText:L,probabilities:$}=H();class Q{id=1;canvas;[i(193)];engine;[i(229)];runner;[i(157)];[i(152)];[i(239)];ballParamsMap=new Map;[i(222)]={};[i(268)]=w[i(167)].nextGroup(!0);[i(173)]={ballRadius:4,frictionAir:.05};[i(233)];[i(255)];gameRes;constructor(e){const x=i;this[x(203)]=document[x(210)]("canvas"),e[x(195)](this[x(203)]),this[x(193)]=new W,this[x(178)]=w[x(213)][x(265)](),this.world=this[x(178)][x(229)],this.runner=w[x(158)][x(265)](),this.engine[x(201)]=10,this[x(178)].velocityIterations=10,this[x(178)][x(169)][x(170)]=2}async[i(232)](e,x,t){const a=i;this[a(157)]=e,this.height=x,this[a(203)][a(164)][a(157)]=e+"px",this[a(203)][a(164)][a(152)]=x+"px",this[a(227)][a(218)][a(237)](this[a(157)]-45,this[a(152)]/4),this[a(193)].stage.addChild(this.stackBox),await this[a(193)].init({canvas:this[a(203)],width:e,height:x,background:t,antialias:!0,resolution:window[a(256)]}),w[a(158)][a(220)](this[a(225)],this[a(178)]),this[a(226)]()}[i(175)](e,x){const t=i;this[t(173)]={ballRadius:e,frictionAir:x}}[i(254)](e){const x=i,t=this[x(157)]/2,a=[t,t+this[x(222)][x(259)]],o=[t,t-this[x(222)][x(259)]],f=e[0],l=Math.floor(Math.random()*2),_=f==="R"?a[l]:o[l],n=w[x(267)].circle(_,0,this.ballConfig.ballRadius,{id:this.id++,label:x(200),mass:1,restitution:0,friction:0,frictionAir:this[x(173)].frictionAir,collisionFilter:{group:this[x(268)]}}),s=new g()[x(248)](0,0,this[x(173)][x(215)])[x(188)](16733525);s[x(218)][x(237)](n[x(218)].x,n[x(218)].y),w[x(261)].add(this[x(229)],n),this[x(193)].stage.addChild(s);const c=()=>{const d=x;s[d(218)].set(n[d(218)].x,n[d(218)].y),s[d(266)]=n[d(176)];const b=(this.pinParams[d(162)]-2)*this[d(222)][d(259)]+this[d(222)][d(259)]/2;n.position.y>b&&(this.findResultArea(n[d(218)].x),M.Composite[d(151)](this[d(229)],n),s[d(263)](),this[d(193)][d(205)][d(151)](c),this[d(163)][d(155)](n.id))};this[x(193)][x(205)][x(184)](c);const r={path:e,start:l,fir:f};this[x(163)][x(237)](n.id,r)}pinsMatter=[];pinsGfx=[];[i(223)](e){const x=i;this.clearPinsAndRes(),this[x(222)]=e;const{rows:t,startY:a,gap:o,pinRadius:f}=e;for(let l=2;l<t;l++){const _=l+1,n=(_-1)*o,s=this.width/2-n/2;for(let c=0;c<_;c++){const r=s+c*o,d=a+(l-2)*o,b=w[x(267)].circle(r,d,f,{isStatic:!0,label:"row-"+(l-1)+"-"+c}),p=new g()[x(248)](0,0,f)[x(188)](16777215);p.x=r,p.y=d,this[x(234)][x(269)](b),this[x(240)][x(269)](p),M.Composite[x(184)](this[x(229)],b),this[x(193)].stage[x(251)](p)}}this.createResultBox()}[i(160)](e){const x=i,{bodyA:t,bodyB:a}=e,o=t[x(168)]==="ball"?t:a[x(168)]===x(200)?a:null,f=t.label[x(207)]("row-")?t[x(168)]:a.label[x(207)](x(246))?a[x(168)]:null,l=t[x(168)][x(207)](x(246))?t:a[x(168)][x(207)](x(246))?a:null;if(l&&this[x(172)](l),!o||!f)return;const _=o.id,n=Number.parseInt(f.split("-")[1],10),s=this[x(163)][x(250)](_);if(!s)return;const{path:c,start:r,fir:d}=s;if(!c||!d||Number[x(247)](n))return;if(n===1){const p=d==="R"?r===0?1:-1:r===0?-1.2:1.2;this[x(202)](o,p);return}const b=c[n-1];b==="R"?this[x(202)](o,1.2):b==="L"&&this[x(202)](o,-1.2)}[i(191)]=new Map;[i(161)]="low";async[i(238)](){const e=i,x=this[e(222)][e(259)],t=x-2,a=this.pinParams[e(162)]-1,o=a-2,f=this[e(222)][e(249)]+o*x+x/2,l=this[e(157)]/2-a*x/2,_=this[e(222)][e(162)]-2;for(let n=0;n<a;n++){const s=l+n*x+1,c=new P({label:e(183)+n,interactive:!0}),r=new g().roundRect(0,0,t,14,2)[e(188)]({color:this.getBg(_,n)}),d=new g()[e(174)](0,0,t,16,2)[e(188)]({color:this.getShadow(_,n)});d[e(218)][e(237)](0,0);const b=this[e(208)](this[e(161)],_,n)||0,p=new U({label:e(264)+n,text:b+`
x`,style:{fontSize:14,fill:e(212),align:e(197)},anchor:.5});p[e(218)][e(237)](t/2,8),p[e(231)][e(237)](.4),c[e(251)](d),c[e(251)](r),c.addChild(p),c[e(218)][e(237)](s,f),this[e(191)][e(237)](n,c),this[e(193)][e(219)][e(251)](c)}}clearPinsAndRes(){const e=i;for(const x of this[e(234)])w[e(261)][e(151)](this[e(229)],x);for(const x of this[e(240)])x[e(263)]();this[e(234)]=[],this.pinsGfx=[],this[e(191)].forEach(x=>{x[e(263)]()}),this.resBoxMap.clear(),this[e(177)]=0}addXPower(e,x){M.Body.setVelocity(e,{x,y:0})}[i(258)](e,x){return Z["_"+e][x]}[i(166)](e,x){return K["_"+e][x]}[i(208)](e,x,t){return L[e]["_"+x][t]}[i(228)](e,x){return $["_"+e][x]*100}[i(260)](e){const x=i;this[x(233)]=e}setRecordClickCb(e){const x=i;this[x(255)]=e}[i(244)](e){const x=i;if(this[x(161)]=e,!!L[e])for(const[a,o]of this[x(191)]){const f=o[x(235)](x(264)+a),l=L[e]["_"+(this.pinParams[x(162)]-2)][a];f[x(179)]=l+`
x`}}[i(242)](e){const x=i;for(const[t,a]of this[x(191)].entries()){const o=a.x,f=a.x+a.width;e>=o&&e<=f&&(this[x(204)](a),console[x(181)]("Ball hit result box "+t))}}listenCollisions(){const e=i;w[e(185)].on(this[e(178)],"collisionStart",x=>{const t=e;for(const a of x[t(253)])this[t(160)](a)})}[i(172)](e){const x=i,t=new g;t[x(218)][x(237)](e[x(218)].x,e[x(218)].y),this[x(193)][x(219)][x(251)](t);const a=0,o=10,f=400,l=performance[x(198)](),_=n=>{const s=x,c=n-l,r=Math[s(189)](c/f,1),d=a+(o-a)*r,b=.9*(1-r);t[s(187)]();const p=e[s(243)]??4;t.circle(0,0,p*1.2+d)[s(188)]({color:16777215,alpha:b}),r<1?requestAnimationFrame(_):t[s(263)]()};requestAnimationFrame(_)}[i(177)]=0;[i(204)](e){const x=i,t=e[x(218)].y;this[x(177)]||(this[x(177)]=t);const a=4,o=150,f=performance.now(),l=_=>{const n=x,s=_-f,c=Math.min(s/o,1);e[n(218)].y=t+a*c,c<1?requestAnimationFrame(l):e.position.y=this[n(177)]};requestAnimationFrame(l)}[i(245)]=new z;[i(192)]=[];[i(159)]=4;[i(199)]=26;[i(211)]=26;[i(227)]=new P;[i(214)]=0;[i(156)](e){this.gameRes=e}[i(196)](e,x,t){const a=i,o=t?.6:1,f=[{x:0,y:this[a(211)],radius:0},{x:this.boxWidth,y:this.boxHeight,radius:0},{x:this[a(199)],y:0,radius:0},{x:0,y:0,radius:0}];return e===0?(f[2][a(190)]=4,f[3].radius=4):e===this[a(159)]-1&&(f[0].radius=4,f[1][a(190)]=4),new g({label:String(x)})[a(194)](f,10)[a(188)]({color:x,alpha:o}).stroke({width:1,color:0})}[i(217)](e,x){const t=i,a=new P({interactive:!0});a[t(218)][t(237)](0,-this[t(211)]);const o=this[t(196)](this[t(214)],x),f=new U({text:e+"x",style:{fontSize:16,fill:0},scale:.5,anchor:.5});f[t(218)].x=this[t(199)]/2,f[t(218)].y=this.boxHeight/2,a[t(251)](o),a.addChild(f),this.stackBox[t(251)](a),this[t(192)].unshift(a);let l;a.on(t(252),()=>{const n=t;l=this[n(196)](this[n(214)],0,!0),a[n(251)](l)}),a.on(t(262),()=>{const n=t;l&&(a.removeChild(l),l?.[n(263)](),l=null)}),a.on("click",()=>{const n=t;console[n(181)](n(216)),this.recordCallback&&this[n(255)]()}),this[t(214)]++,this[t(214)]===4&&(this[t(214)]=1),this[t(192)][t(165)]((n,s)=>{const c=t,r=s*this[c(211)];if(this.recordArr[c(186)]>1){const d=this[c(192)][s],b=d[c(154)](d.children[0]),p=b[c(168)];b[c(263)](),this[c(192)][s].addChild(this.createRoundedRect(s,Number(p))),this[c(192)][s][c(257)].reverse()}new q(n.position,this[c(245)]).to({y:r},200)[c(230)]()});const _=n=>{this.tweenGroup.update(n.lastTime)};if(this[t(192)][t(186)]>this[t(159)]){const n=this[t(192)].pop();new q(n[t(218)],this.tweenGroup).to({alpha:0},150)[t(236)](()=>{const s=t;this[s(193)][s(205)][s(151)](_),this[s(227)][s(154)](n),n?.[s(263)]()})[t(230)]()}this.app[t(205)].add(_)}}const u=R;(function(h,e){const x=R,t=h();for(;;)try{if(-parseInt(x(466))/1*(-parseInt(x(468))/2)+-parseInt(x(478))/3+parseInt(x(492))/4*(-parseInt(x(477))/5)+parseInt(x(465))/6*(parseInt(x(505))/7)+parseInt(x(485))/8+-parseInt(x(500))/9+-parseInt(x(499))/10*(parseInt(x(456))/11)===e)break;t.push(t.shift())}catch{t.push(t.shift())}})(y,624674);function R(h,e){const x=y();return R=function(t,a){return t=t-451,x[t]},R(h,e)}const x0={class:u(482)},e0={class:"relative"},t0={class:u(490)},a0=[u(488)],s0={class:u(469)},i0={key:0,id:u(458),class:u(461)},n0={class:u(480)},c0={class:u(460)},r0=["disabled"],o0=10;function y(){const h=["当前 ","w-full flex justify-center items-center","help","target","false","/10","24078ijUDXn","12CdlTrj","replace","196958tJsJcr","hint-row","pins","#1e1e1e","path","radius","AppPlinko","div","text","3490CaVowp","981168imAlkU","createPinsAndResultBoxes","counter","setBallConfig","relative","仅允许填写字符 L 或 R","split","6318848cvkURd","characters","2 秒允许点击一次","aria-invalid","ballConfig","input-wrap","test","96VbigLB","input","span","value","例如：LRRLLRLR","投球路径（10 位，仅 L/R）"," 位，请填写 10 位","785790oVvEFx","6467202FSaEax","label","start-btn","container","init","189NMxplf","toUpperCase","get","air","length","slice","55nNAtkx","createBall","path-help"];return y=function(){return h},y()}const d0=F({__name:u(474),setup(h){const e=u,x=A(null);let t;const a=A(""),o=G(()=>/^[LR]{10}$/.test(a[e(495)])),f=A(!1),l=G(()=>{const s=e;return a[s(495)]?/[^LR]/[s(491)](a.value)?s(483):a.value[s(454)]!==10?s(459)+a.value.length+s(498):"":"请输入 10 位路径，仅允许 L 或 R"});function _(s){const c=e,r=s[c(462)],d=r[c(495)][c(451)]()[c(467)](/[^LR]/g,"")[c(455)](0,10);a[c(495)]=d}async function n(){const s=e;if(!o[s(495)]||f.value||!t)return;f.value=!0;const c=a.value[s(484)]("");t[s(457)](c),setTimeout(()=>f[s(495)]=!1,400)}return J(async()=>{const s=e,c=O[s(452)](10);x.value&&(t=new Q(x[s(495)]),await t[s(504)](300,276,s(471)),await t[s(479)](c?.[s(470)]??{rows:12,startY:24,gap:24,pinRadius:4}),t[s(481)](c?.ballConfig[s(473)],c?.[s(489)][s(453)]))}),(s,c)=>{const r=e;return T(),S(r(475),x0,[m(r(475),e0,[m(r(475),{ref_key:r(503),ref:x,class:"container"},null,512)]),m("div",t0,[c[1]||(c[1]=m(r(501),{class:r(501),for:r(472)},r(497),-1)),V(m(r(493),{id:r(472),class:Y(["input-control",{invalid:!o[r(495)]&&a[r(495)]}]),type:r(476),"onUpdate:modelValue":c[0]||(c[0]=d=>a[r(495)]=d),maxlength:o0,placeholder:r(496),onInput:_,autocomplete:"off",autocapitalize:r(486),spellcheck:r(463),"aria-describedby":r(458),"aria-invalid":!o[r(495)]},null,42,a0),[[j,a.value]]),m(r(475),s0,[l[r(495)]?(T(),S(r(494),i0,N(l[r(495)]),1)):D("",!0),m(r(494),n0,N(a[r(495)][r(454)])+r(464),1)])]),m(r(475),c0,[m("button",{class:r(502),disabled:!o.value||f.value,onClick:n,title:r(487)}," 开始游戏 ",8,r0)])])}}});var f0=k;(function(h,e){for(var x=k,t=h();;)try{var a=parseInt(x(426))/1*(-parseInt(x(423))/2)+parseInt(x(418))/3+parseInt(x(417))/4*(-parseInt(x(425))/5)+parseInt(x(420))/6*(parseInt(x(424))/7)+parseInt(x(419))/8*(-parseInt(x(428))/9)+-parseInt(x(422))/10+parseInt(x(421))/11;if(a===e)break;t.push(t.shift())}catch{t.push(t.shift())}})(B,417942);function k(h,e){var x=B();return k=function(t,a){t=t-417;var o=x[t];return o},k(h,e)}function B(){var h=["8166btDsrL","13577311bbkAdO","6518670ULqhJU","2TjpxpS","3843PvvJrI","105ZaqyWX","391838MCSgHq","data-v-cb23dd70","9jUumKE","95868grfzWv","2018313PfeCtm","5514456hmLEGp"];return B=function(){return h},B()}const p0=X(d0,[["__scopeId",f0(427)]]);export{p0 as A,X as _};
