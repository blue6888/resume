import{d as N,r as G,c as S,o as Y,a as T,b as j,e as u,w as U,v as D,n as H,f as O,t as q}from"./vendor-q4_JwtHI.js";import{A as V,G as I,C as L,B as X}from"./vendor-pixi-js-CqIIzDVx.js";import{_ as m,m as v}from"./vendor-matter-js-BQ72DKUX.js";import{G as J,T as z}from"./vendor-tweenjs-BtMkXI7v.js";const Z=(d,e)=>{const x=d.__vccOpts||d;for(const[t,s]of e)x[t]=s;return x};function y(d,e){const x=R();return y=function(t,s){return t=t-215,x[t]},y(d,e)}(function(d,e){const x=y,t=d();for(;;)try{if(-parseInt(x(216))/1*(parseInt(x(215))/2)+parseInt(x(227))/3*(-parseInt(x(224))/4)+-parseInt(x(219))/5+parseInt(x(223))/6*(-parseInt(x(226))/7)+parseInt(x(218))/8+-parseInt(x(222))/9*(parseInt(x(217))/10)+parseInt(x(220))/11===e)break;t.push(t.shift())}catch{t.push(t.shift())}})(R,405422);function Q(){const d=r=>{const f=y,l=r[f(221)]((i,a)=>i+a,0);return r[f(225)](i=>i/l)},e={low:{_10:[8.9,3,1.4,1.1,1,.5,1,1.1,1.4,3,8.9]},middle:{_10:[22,5,2,1.4,.6,.4,.6,1.4,2,5,22]},high:{_10:[76,10,3,.9,.3,.2,.3,.9,3,10,76]}},x={_10:d([1,10,45,120,210,252,210,120,45,10,1])};return{resText:e,probabilities:x,colors:{_10:[1357990,440020,3718648,5195493,9133302,59135,9133302,5195493,3718648,440020,1357990]},shadows:{_10:[1020292,561586,959977,4405450,7153881,42956,7153881,4405450,959977,561586,1020292]}}}const W=new Map([[10,{pins:{rows:12,startY:24,gap:24,pinRadius:4},ballConfig:{radius:6,air:.12}}]]);function R(){const d=["1212RIAUIa","113988mxjmCM","map","21399sAqdln","66DxabuL","717754hInQQT","1ADDKDu","6767710fZQnEE","5765904kIIxsq","2556230BNUjjP","27236286cSaCXa","reduce","9XdqQft"];return R=function(){return d},R()}const c=C;(function(d,e){const x=C,t=d();for(;;)try{if(-parseInt(x(303))/1*(parseInt(x(247))/2)+-parseInt(x(226))/3*(parseInt(x(342))/4)+parseInt(x(272))/5*(parseInt(x(229))/6)+-parseInt(x(297))/7+parseInt(x(268))/8*(parseInt(x(231))/9)+parseInt(x(328))/10*(parseInt(x(259))/11)+-parseInt(x(242))/12===e)break;t.push(t.shift())}catch{t.push(t.shift())}})(k,872085);function C(d,e){const x=k();return C=function(t,s){return t=t-225,x[t]},C(d,e)}function k(){const d=["#000","3768651WmGvGn","tweenGroup","fill","get","start","boxHeight","recordCallback","ticker","Runner","random","level","848952zPlldc","clear","setLevel","dealCollisions","add","2598014ItJJXa","createBall","pinAnimal","setPopCb","startsWith","row-","getProbability","getText","engine","nextGroup","init","canvas","3553buWgmB","app","runner","label","boxWidth","pinsMatter","setVelocity","world","createRoundedRect","32TDORRL","reverse","create","roundShape","2255HEzJaQ","position","stackBox","click","angle","createResultBox","createPinsAndResultBoxes","resBoxMap","Body","unshift","res-text-","velocityIterations","lastTime","floor","ballConfig","rows","style","setBallConfig","startY","stroke","toFixed","radius","recordArr","firstY","getShadow","5268144ebbqjd","text","gameRes","isNaN","remove","getBg","1XisgOU","height","findResultArea","addChild","mouseout","resBoxAnimal","stage","timing","tickerFn","set","ballParamsMap","pinsGfx","timeScale","rotation","显示游戏结果事件","push","pinParams","length","children","clearPinsAndRes","Bodies","split","log","onComplete","center","22130zqIPUH","Composite","parseInt","destroy","width","pairs","nonCollideGroup","ball","devicePixelRatio","mouseover","gap","roundRect","popCallback","recordCount","8nSgjxU","addXPower","ballRadius","forEach","positionIterations","pop","now","collisionStart","circle","maxCount","removeChild","min","1392411ThSHpx","circleRadius","run","20394jttrYo"];return k=function(){return d},k()}const{colors:K,shadows:$,resText:E,probabilities:x0}=Q();class t0{id=1;[c(258)];[c(260)];[c(255)];[c(266)];[c(261)];[c(332)];[c(304)];[c(311)];ballParamsMap=new Map;[c(319)]={};nonCollideGroup=m[c(280)][c(256)](!0);[c(286)]={ballRadius:4,frictionAir:.05};popCallback;recordCallback;[c(299)];constructor(e){const x=c;this[x(258)]=document.createElement(x(258)),e.appendChild(this[x(258)]),this[x(260)]=new V,this[x(255)]=v.Engine.create(),this.world=this[x(255)].world,this.runner=m[x(239)][x(270)](),this[x(255)][x(346)]=10,this[x(255)][x(283)]=10,this[x(255)][x(310)][x(315)]=2}async init(e,x,t){const s=c;this[s(332)]=e,this[s(304)]=x,this[s(258)][s(288)][s(332)]=e+"px",this[s(258)][s(288)][s(304)]=x+"px",this[s(274)][s(273)].set(this[s(332)]-45,this.height/4),this[s(260)].stage[s(306)](this[s(274)]),await this[s(260)][s(257)]({canvas:this[s(258)],width:e,height:x,background:t,antialias:!0,resolution:window[s(336)]}),v.Runner[s(228)](this[s(261)],this[s(255)]),this.listenCollisions()}[c(289)](e,x){const t=c;this[t(286)]={ballRadius:e,frictionAir:x}}[c(248)](e){const x=c,t=this[x(332)]/2,s=[t,t+this[x(319)][x(338)]],r=[t,t-this[x(319)][x(338)]],f=e[0],l=Math[x(285)](Math[x(240)]()*2),_=f==="R"?s[l]:r[l],i=v.Bodies.circle(_,0,this[x(286)][x(344)],{id:this.id++,label:x(335),mass:1,restitution:0,friction:0,frictionAir:this[x(286)].frictionAir,collisionFilter:{group:this[x(334)]}}),a=new I().circle(0,0,this[x(286)][x(344)])[x(233)](16733525);a[x(273)][x(312)](i.position.x,i.position.y),v.Composite[x(246)](this.world,i),this[x(260)].stage.addChild(a);const n=()=>{const h=x;a.position[h(312)](i[h(273)].x,i[h(273)].y),a[h(316)]=i[h(276)];const p=(this.pinParams.rows-2)*this[h(319)].gap+this[h(319)].gap/2;i.position.y>p&&(this[h(305)](i[h(273)].x),m[h(329)].remove(this.world,i),a.destroy(),this.app[h(238)].remove(n),this[h(313)].delete(i.id))};this.app[x(238)][x(246)](n);const o={path:e,start:l,fir:f};this[x(313)][x(312)](i.id,o)}[c(264)]=[];[c(314)]=[];[c(278)](e){const x=c;this[x(322)](),this[x(319)]=e;const{rows:t,startY:s,gap:r,pinRadius:f}=e;for(let l=2;l<t;l++){const _=l+1,i=(_-1)*r,a=this[x(332)]/2-i/2;for(let n=0;n<_;n++){const o=a+n*r,h=s+(l-2)*r,p=m[x(323)][x(350)](o,h,f,{isStatic:!0,label:x(252)+(l-1)+"-"+n}),b=new I()[x(350)](0,0,f).fill(16777215);b.x=o,b.y=h,this.pinsMatter[x(318)](p),this[x(314)][x(318)](b),m[x(329)].add(this[x(266)],p),this[x(260)][x(309)][x(306)](b)}}this[x(277)]()}[c(245)](e){const x=c,{bodyA:t,bodyB:s}=e,r=t[x(262)]==="ball"?t:s.label===x(335)?s:null,f=t[x(262)].startsWith(x(252))?t[x(262)]:s[x(262)][x(251)](x(252))?s.label:null,l=t[x(262)][x(251)](x(252))?t:s.label[x(251)](x(252))?s:null;if(l&&this[x(249)](l),!r||!f)return;const _=r.id,i=Number[x(330)](f[x(324)]("-")[1],10),a=this[x(313)][x(234)](_);if(!a)return;const{path:n,start:o,fir:h}=a;if(!n||!h||Number[x(300)](i))return;if(i===1){const b=h==="R"?o===0?1:-1:o===0?-1.2:1.2;this.addXPower(r,b);return}const p=n[i-1];p==="R"?this[x(343)](r,1.2):p==="L"&&this[x(343)](r,-1.2)}[c(279)]=new Map;level="low";async[c(277)](){const e=c,x=this[e(319)].gap,t=x-2,s=this.pinParams[e(287)]-1,r=s-2,f=this[e(319)][e(290)]+r*x+x/2,l=this[e(332)]/2-s*x/2,_=this[e(319)][e(287)]-2;for(let i=0;i<s;i++){const a=l+i*x+1,n=new L({label:"res-"+i,interactive:!0}),o=new I()[e(339)](0,0,t,14,2)[e(233)]({color:this[e(302)](_,i)}),h=new I().roundRect(0,0,t,16,2).fill({color:this[e(296)](_,i)});h[e(273)][e(312)](0,0);const p=this.getText(this[e(241)],_,i)||0,b=new X({label:e(282)+i,text:p+`
x`,style:{fontSize:14,fill:e(230),align:e(327)},anchor:.5});b.position[e(312)](t/2,8),b.scale.set(.4),n[e(306)](h),n[e(306)](o),n[e(306)](b),n.position[e(312)](a,f),this[e(279)].set(i,n),this.app[e(309)][e(306)](n),n.on(e(337),()=>{const g=e;this[g(340)](!0,this[g(253)](this.pinParams[g(287)]-2,i)[g(292)](4))}),n.on(e(307),()=>{this[e(340)](!1)})}}clearPinsAndRes(){const e=c;for(const x of this.pinsMatter)m[e(329)][e(301)](this[e(266)],x);for(const x of this[e(314)])x[e(331)]();this[e(264)]=[],this[e(314)]=[],this.resBoxMap[e(345)](x=>{x[e(331)]()}),this[e(279)].clear(),this.firstY=0}[c(343)](e,x){const t=c;m[t(280)][t(265)](e,{x,y:0})}[c(302)](e,x){return K["_"+e][x]}[c(296)](e,x){return $["_"+e][x]}[c(254)](e,x,t){return E[e]["_"+x][t]}getProbability(e,x){return x0["_"+e][x]*100}[c(250)](e){const x=c;this[x(340)]=e}setRecordClickCb(e){const x=c;this[x(237)]=e}[c(244)](e){const x=c;if(this.level=e,!!E[e])for(const[s,r]of this[x(279)]){const f=r.getChildByLabel(x(282)+s),l=E[e]["_"+(this.pinParams[x(287)]-2)][s];f[x(298)]=l+`
x`}}[c(305)](e){const x=c;for(const[t,s]of this[x(279)].entries()){const r=s.x,f=s.x+s[x(332)];e>=r&&e<=f&&(this[x(308)](s),console[x(325)]("Ball hit result box "+t))}}listenCollisions(){const e=c;v.Events.on(this[e(255)],e(349),x=>{const t=e;for(const s of x[t(333)])this[t(245)](s)})}[c(249)](e){const x=c,t=new I;t.position[x(312)](e[x(273)].x,e[x(273)].y),this.app.stage[x(306)](t);const s=0,r=10,f=400,l=performance[x(348)](),_=i=>{const a=x,n=i-l,o=Math[a(225)](n/f,1),h=s+(r-s)*o,p=.9*(1-o);t[a(243)]();const b=e[a(227)]??4;t[a(350)](0,0,b*1.2+h)[a(233)]({color:16777215,alpha:p}),o<1?requestAnimationFrame(_):t[a(331)]()};requestAnimationFrame(_)}[c(295)]=0;[c(308)](e){const x=c,t=e[x(273)].y;this[x(295)]||(this[x(295)]=t);const s=4,r=150,f=performance[x(348)](),l=_=>{const i=x,a=_-f,n=Math[i(225)](a/r,1);e[i(273)].y=t+s*n,n<1?requestAnimationFrame(l):e.position.y=this[i(295)]};requestAnimationFrame(l)}[c(232)]=new J;[c(294)]=[];maxCount=4;[c(263)]=26;boxHeight=26;[c(274)]=new L;[c(341)]=0;setGameRes(e){const x=c;this[x(299)]=e}[c(267)](e,x,t){const s=c,r=t?.6:1,f=[{x:0,y:this[s(236)],radius:0},{x:this[s(263)],y:this[s(236)],radius:0},{x:this[s(263)],y:0,radius:0},{x:0,y:0,radius:0}];return e===0?(f[2][s(293)]=4,f[3][s(293)]=4):e===this[s(351)]-1&&(f[0].radius=4,f[1].radius=4),new I({label:String(x)})[s(271)](f,10)[s(233)]({color:x,alpha:r})[s(291)]({width:1,color:0})}addRecord(e,x){const t=c,s=new L({interactive:!0});s[t(273)][t(312)](0,-this[t(236)]);const r=this[t(267)](this[t(341)],x),f=new X({text:e+"x",style:{fontSize:16,fill:0},scale:.5,anchor:.5});f.position.x=this[t(263)]/2,f.position.y=this[t(236)]/2,s[t(306)](r),s[t(306)](f),this.stackBox.addChild(s),this[t(294)][t(281)](s);let l;s.on(t(337),()=>{const i=t;l=this[i(267)](this[i(341)],0,!0),s[i(306)](l)}),s.on(t(307),()=>{const i=t;l&&(s.removeChild(l),l?.[i(331)](),l=null)}),s.on(t(275),()=>{const i=t;console.log(i(317)),this[i(237)]&&this[i(237)]()}),this[t(341)]++,this[t(341)]===4&&(this[t(341)]=1),this[t(294)].forEach((i,a)=>{const n=t,o=a*this[n(236)];if(this[n(294)][n(320)]>1){const h=this[n(294)][a],p=h.removeChild(h[n(321)][0]),b=p[n(262)];p[n(331)](),this[n(294)][a].addChild(this.createRoundedRect(a,Number(b))),this[n(294)][a][n(321)][n(269)]()}new z(i[n(273)],this[n(232)]).to({y:o},200)[n(235)]()});const _=i=>{const a=t;this[a(232)].update(i[a(284)])};if(this[t(294)][t(320)]>this[t(351)]){const i=this.recordArr[t(347)]();new z(i.position,this.tweenGroup).to({alpha:0},150)[t(326)](()=>{const a=t;this[a(260)].ticker.remove(_),this.stackBox[a(352)](i),i?.destroy()})[t(235)]()}this[t(260)][t(238)][t(246)](_)}}const w=B;(function(d,e){const x=B,t=d();for(;;)try{if(-parseInt(x(336))/1+-parseInt(x(346))/2*(parseInt(x(305))/3)+parseInt(x(317))/4*(parseInt(x(322))/5)+parseInt(x(332))/6+-parseInt(x(340))/7+parseInt(x(321))/8+parseInt(x(333))/9===e)break;t.push(t.shift())}catch{t.push(t.shift())}})(A,290045);const e0={class:w(339)},s0={class:w(339)},a0={class:"input-wrap"},i0=["aria-invalid"],n0={class:w(312)},c0={key:0,id:w(316),class:w(306)},o0={class:w(307)},r0={class:"w-full flex justify-center items-center"},f0=["disabled"];function B(d,e){const x=A();return B=function(t,s){return t=t-303,x[t]},B(d,e)}const l0=10,d0=N({__name:"AppPlinko",setup(d){const e=w,x=G(null);let t;const s=G(""),r=S(()=>/^[LR]{10}$/[e(335)](s[e(314)])),f=G(!1),l=S(()=>{const a=e;return s[a(314)]?/[^LR]/.test(s[a(314)])?a(323):s[a(314)][a(319)]!==10?a(331)+s[a(314)].length+" 位，请填写 10 位":"":a(342)});function _(a){const n=e,o=a[n(325)],h=o[n(314)][n(320)]()[n(328)](/[^LR]/g,"")[n(345)](0,10);s.value=h}async function i(){const a=e;if(!r.value||f[a(314)]||!t)return;f[a(314)]=!0;const n=s[a(314)][a(330)]("");t[a(327)](n),setTimeout(()=>f.value=!1,400)}return Y(async()=>{const a=e,n=W.get(10);x[a(314)]&&(t=new t0(x[a(314)]),await t.init(300,276,a(318)),await t.createPinsAndResultBoxes(n?.[a(326)]??{rows:12,startY:24,gap:24,pinRadius:4}),t[a(329)](n?.[a(315)].radius,n?.[a(315)][a(309)]))}),(a,n)=>{const o=e;return j(),T("div",e0,[u(o(308),s0,[u(o(308),{ref_key:"container",ref:x,class:o(310)},null,512)]),u("div",a0,[n[1]||(n[1]=u("label",{class:o(303),for:o(347)},"投球路径（10 位，仅 L/R）",-1)),U(u(o(337),{id:o(347),class:H([o(338),{invalid:!r.value&&s.value}]),type:o(313),"onUpdate:modelValue":n[0]||(n[0]=h=>s.value=h),maxlength:l0,placeholder:o(341),onInput:_,autocomplete:o(311),autocapitalize:o(344),spellcheck:o(348),"aria-describedby":o(316),"aria-invalid":!r.value},null,42,i0),[[D,s[o(314)]]]),u("div",n0,[l[o(314)]?(j(),T(o(334),c0,q(l[o(314)]),1)):O("",!0),u("span",o0,q(s[o(314)][o(319)])+"/10",1)])]),u(o(308),r0,[u(o(324),{class:o(343),disabled:!r[o(314)]||f[o(314)],onClick:i,title:o(304)}," 开始游戏 ",8,f0)])])}}});function A(){const d=["1821884YcszaZ","#1e1e1e","length","toUpperCase","1131192nGXfaZ","5XORfLO","仅允许填写字符 L 或 R","button","target","pins","createBall","replace","setBallConfig","split","当前 ","1098318qeGOKJ","5141268nwGhhp","span","test","488369sfyrHj","input","input-control","relative","3342318llemuB","例如：LRRLLRLR","请输入 10 位路径，仅允许 L 或 R","start-btn","characters","slice","190574hXjemp","path","false","label","2 秒允许点击一次","3gZGPdw","help","counter","div","air","container","off","hint-row","text","value","ballConfig","path-help"];return A=function(){return d},A()}var F=P;function P(d,e){var x=M();return P=function(t,s){t=t-201;var r=x[t];return r},P(d,e)}(function(d,e){for(var x=P,t=d();;)try{var s=parseInt(x(202))/1*(-parseInt(x(206))/2)+parseInt(x(210))/3+parseInt(x(211))/4+parseInt(x(212))/5*(parseInt(x(203))/6)+-parseInt(x(209))/7*(parseInt(x(205))/8)+-parseInt(x(207))/9+-parseInt(x(201))/10*(parseInt(x(208))/11);if(s===e)break;t.push(t.shift())}catch{t.push(t.shift())}})(M,918786);function M(){var d=["116CRnlOt","5493627cSvEur","84007MkNlaV","1571738AmhEzV","5348706MLZCGB","3991328EIgimU","1615270ySETlF","data-v-cb23dd70","1570VdnYeP","3829BwXjMR","24ZKIKkj","__scopeId","40HjJyJq"];return M=function(){return d},M()}const u0=Z(d0,[[F(204),F(213)]]);export{u0 as A,Z as _};
