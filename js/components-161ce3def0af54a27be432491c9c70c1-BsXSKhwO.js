import{d as T,r as P,c as N,o as q,a as F,b as G,e as m,w as Q,v as H,n as U,f as Z,t as S}from"./vendor-q4_JwtHI.js";import{A as X,G as I,C as L,B as W}from"./vendor-pixi-js-CqIIzDVx.js";import{_ as u,m as D}from"./vendor-matter-js-BQ72DKUX.js";import{G as V,T as z}from"./vendor-tweenjs-BtMkXI7v.js";const Y=(h,e)=>{const x=h.__vccOpts||h;for(const[t,s]of e)x[t]=s;return x};function y(h,e){const x=C();return y=function(t,s){return t=t-419,x[t]},y(h,e)}(function(h,e){const x=y,t=h();for(;;)try{if(parseInt(x(426))/1*(parseInt(x(422))/2)+-parseInt(x(424))/3*(parseInt(x(425))/4)+-parseInt(x(428))/5+-parseInt(x(427))/6*(parseInt(x(423))/7)+-parseInt(x(419))/8*(parseInt(x(431))/9)+-parseInt(x(421))/10*(parseInt(x(430))/11)+parseInt(x(420))/12===e)break;t.push(t.shift())}catch{t.push(t.shift())}})(C,887537);function j(){const h=o=>{const r=y,d=o.reduce((a,c)=>a+c,0);return o[r(429)](a=>a/d)},e={low:{_10:[8.9,3,1.4,1.1,1,.5,1,1.1,1.4,3,8.9]},middle:{_10:[22,5,2,1.4,.6,.4,.6,1.4,2,5,22]},high:{_10:[76,10,3,.9,.3,.2,.3,.9,3,10,76]}},x={_10:h([1,10,45,120,210,252,210,120,45,10,1])};return{resText:e,probabilities:x,colors:{_10:[1357990,440020,3718648,5195493,9133302,59135,9133302,5195493,3718648,440020,1357990]},shadows:{_10:[1020292,561586,959977,4405450,7153881,42956,7153881,4405450,959977,561586,1020292]}}}function C(){const h=["8765175gVkQBQ","map","8338tnHSRt","9UqbLJX","4302808ekFatw","53885496nubNyz","4070pwobPM","4afRNzg","3726310isLbQG","51WESnhv","190172mbTcQa","700846ZKrTvW","18rWCmNS"];return C=function(){return h},C()}const J=new Map([[10,{pins:{rows:12,startY:24,gap:24,pinRadius:4},ballConfig:{radius:6,air:.12}}]]),n=k;function R(){const h=["setRecordClickCb","push","stroke","ballParamsMap","radius","removeChild","mouseover","firstY","createElement","update","addXPower","timeScale","min","listenCollisions","run","random","lastTime","text","appendChild","log","ball","init","width","recordArr","2261895QovBWe","2918HFLENf","Runner","onComplete","createRoundedRect","ticker","rows","fill","1027612ZDQCJI","Ball hit result box ","getText","Body","231bRUcrn","23082BEsROW","Bodies","1264gzDgEt","world","resBoxMap","add","click","boxHeight","clearPinsAndRes","pinsGfx","boxWidth","pinAnimal","reverse","split","circle","low","row-","popCallback","timing","addChild","roundShape","getChildByLabel","toFixed","isNaN","#000","stage","frictionAir","app","remove","getProbability","runner","clear","scale","ballRadius","9MkqVSB","rotation","gameRes","label","createBall","style","pinsMatter","create","recordCallback","Engine","tickerFn","startsWith","11639067qZUzkK","maxCount","pop","setGameRes","roundRect","getBg","addRecord","63240NnCDZW","createPinsAndResultBoxes","91390aWnEPz","res-","length","canvas","1260YaXwFw","engine","stackBox","createResultBox","position","dealCollisions","nextGroup","res-text-","set","ballConfig","now","angle","pairs","start","destroy","positionIterations","mouseout","setLevel","gap","forEach","level","unshift","parseInt","tweenGroup","Events","circleRadius","findResultArea","recordCount","pinParams","children","height","getShadow","Composite","nonCollideGroup"];return R=function(){return h},R()}(function(h,e){const x=k,t=h();for(;;)try{if(-parseInt(x(437))/1*(-parseInt(x(451))/2)+-parseInt(x(436))/3+parseInt(x(444))/4+-parseInt(x(378))/5*(-parseInt(x(449))/6)+parseInt(x(448))/7*(-parseInt(x(372))/8)+-parseInt(x(353))/9*(parseInt(x(374))/10)+-parseInt(x(365))/11===e)break;t.push(t.shift())}catch{t.push(t.shift())}})(R,988457);function k(h,e){const x=R();return k=function(t,s){return t=t-323,x[t]},k(h,e)}const{colors:K,shadows:O,resText:E,probabilities:$}=j();class x0{id=1;[n(377)];[n(346)];[n(379)];[n(452)];[n(349)];[n(434)];[n(408)];[n(363)];[n(415)]=new Map;[n(406)]={};[n(411)]=u[n(447)][n(384)](!0);[n(387)]={ballRadius:4,frictionAir:.05};[n(336)];recordCallback;gameRes;constructor(e){const x=n;this[x(377)]=document[x(420)](x(377)),e[x(430)](this[x(377)]),this[x(346)]=new X,this[x(379)]=u[x(362)][x(360)](),this[x(452)]=this.engine[x(452)],this[x(349)]=u[x(438)].create(),this.engine[x(393)]=10,this[x(379)].velocityIterations=10,this[x(379)][x(337)][x(423)]=2}async[n(433)](e,x,t){const s=n;this[s(434)]=e,this[s(408)]=x,this[s(377)][s(358)][s(434)]=e+"px",this.canvas[s(358)][s(408)]=x+"px",this[s(380)][s(382)][s(386)](this[s(434)]-45,this.height/4),this.app[s(344)][s(338)](this.stackBox),await this.app[s(433)]({canvas:this[s(377)],width:e,height:x,background:t,antialias:!0,resolution:window.devicePixelRatio}),D.Runner[s(426)](this.runner,this.engine),this[s(425)]()}setBallConfig(e,x){this.ballConfig={ballRadius:e,frictionAir:x}}[n(357)](e){const x=n,t=this[x(434)]/2,s=[t,t+this[x(406)][x(396)]],o=[t,t-this.pinParams.gap],r=e[0],d=Math.floor(Math[x(427)]()*2),f=r==="R"?s[d]:o[d],a=u[x(450)][x(333)](f,0,this[x(387)][x(352)],{id:this.id++,label:x(432),mass:1,restitution:0,friction:0,frictionAir:this[x(387)][x(345)],collisionFilter:{group:this[x(411)]}}),c=new I()[x(333)](0,0,this.ballConfig[x(352)]).fill(16733525);c[x(382)][x(386)](a[x(382)].x,a[x(382)].y),u[x(410)][x(324)](this.world,a),this[x(346)].stage[x(338)](c);const i=()=>{const l=x;c[l(382)][l(386)](a.position.x,a.position.y),c[l(354)]=a[l(389)];const _=(this[l(406)].rows-2)*this[l(406)][l(396)]+this[l(406)][l(396)]/2;a[l(382)].y>_&&(this[l(404)](a[l(382)].x),u[l(410)][l(347)](this[l(452)],a),c.destroy(),this[l(346)][l(441)][l(347)](i),this.ballParamsMap.delete(a.id))};this[x(346)][x(441)][x(324)](i);const b={path:e,start:d,fir:r};this[x(415)][x(386)](a.id,b)}[n(359)]=[];[n(328)]=[];[n(373)](e){const x=n;this[x(327)](),this[x(406)]=e;const{rows:t,startY:s,gap:o,pinRadius:r}=e;for(let d=2;d<t;d++){const f=d+1,a=(f-1)*o,c=this[x(434)]/2-a/2;for(let i=0;i<f;i++){const b=c+i*o,l=s+(d-2)*o,_=u[x(450)].circle(b,l,r,{isStatic:!0,label:"row-"+(d-1)+"-"+i}),p=new I()[x(333)](0,0,r)[x(443)](16777215);p.x=b,p.y=l,this[x(359)][x(413)](_),this[x(328)].push(p),u[x(410)][x(324)](this[x(452)],_),this[x(346)][x(344)][x(338)](p)}}this.createResultBox()}dealCollisions(e){const x=n,{bodyA:t,bodyB:s}=e,o=t[x(356)]===x(432)?t:s[x(356)]===x(432)?s:null,r=t[x(356)][x(364)]("row-")?t.label:s[x(356)].startsWith(x(335))?s[x(356)]:null,d=t[x(356)][x(364)](x(335))?t:s[x(356)].startsWith(x(335))?s:null;if(d&&this[x(330)](d),!o||!r)return;const f=o.id,a=Number[x(400)](r[x(332)]("-")[1],10),c=this.ballParamsMap.get(f);if(!c)return;const{path:i,start:b,fir:l}=c;if(!i||!l||Number[x(342)](a))return;if(a===1){const p=l==="R"?b===0?1:-1:b===0?-1.2:1.2;this.addXPower(o,p);return}const _=i[a-1];_==="R"?this.addXPower(o,1.2):_==="L"&&this[x(422)](o,-1.2)}resBoxMap=new Map;[n(398)]=n(334);async[n(381)](){const e=n,x=this[e(406)][e(396)],t=x-2,s=this[e(406)][e(442)]-1,o=s-2,r=this[e(406)].startY+o*x+x/2,d=this[e(434)]/2-s*x/2,f=this[e(406)][e(442)]-2;for(let a=0;a<s;a++){const c=d+a*x+1,i=new L({label:e(375)+a,interactive:!0}),b=new I()[e(369)](0,0,t,14,2)[e(443)]({color:this[e(370)](f,a)}),l=new I()[e(369)](0,0,t,16,2)[e(443)]({color:this.getShadow(f,a)});l[e(382)].set(0,0);const _=this[e(446)](this[e(398)],f,a)||0,p=new W({label:e(385)+a,text:_+`
x`,style:{fontSize:14,fill:e(343),align:"center"},anchor:.5});p[e(382)][e(386)](t/2,8),p[e(351)][e(386)](.4),i[e(338)](l),i[e(338)](b),i.addChild(p),i[e(382)][e(386)](c,r),this[e(323)].set(a,i),this.app[e(344)][e(338)](i),i.on("mouseover",()=>{const v=e;this.popCallback(!0,this[v(348)](this[v(406)][v(442)]-2,a)[v(341)](4))}),i.on(e(394),()=>{this[e(336)](!1)})}}[n(327)](){const e=n;for(const x of this.pinsMatter)u[e(410)].remove(this[e(452)],x);for(const x of this.pinsGfx)x[e(392)]();this.pinsMatter=[],this[e(328)]=[],this[e(323)][e(397)](x=>{x[e(392)]()}),this.resBoxMap[e(350)](),this[e(419)]=0}addXPower(e,x){u[n(447)].setVelocity(e,{x,y:0})}[n(370)](e,x){return K["_"+e][x]}[n(409)](e,x){return O["_"+e][x]}[n(446)](e,x,t){return E[e]["_"+x][t]}[n(348)](e,x){return $["_"+e][x]*100}setPopCb(e){const x=n;this[x(336)]=e}[n(412)](e){const x=n;this[x(361)]=e}[n(395)](e){const x=n;if(this[x(398)]=e,!!E[e])for(const[s,o]of this[x(323)]){const r=o[x(340)](x(385)+s),d=E[e]["_"+(this[x(406)].rows-2)][s];r[x(429)]=d+`
x`}}findResultArea(e){const x=n;for(const[t,s]of this[x(323)].entries()){const o=s.x,r=s.x+s[x(434)];e>=o&&e<=r&&(this.resBoxAnimal(s),console[x(431)](x(445)+t))}}[n(425)](){const e=n;u[e(402)].on(this.engine,"collisionStart",x=>{const t=e;for(const s of x[t(390)])this[t(383)](s)})}[n(330)](e){const x=n,t=new I;t.position.set(e[x(382)].x,e[x(382)].y),this.app[x(344)][x(338)](t);const s=0,o=10,r=400,d=performance[x(388)](),f=a=>{const c=x,i=a-d,b=Math.min(i/r,1),l=s+(o-s)*b,_=.9*(1-b);t[c(350)]();const p=e[c(403)]??4;t.circle(0,0,p*1.2+l)[c(443)]({color:16777215,alpha:_}),b<1?requestAnimationFrame(f):t[c(392)]()};requestAnimationFrame(f)}[n(419)]=0;resBoxAnimal(e){const x=n,t=e.position.y;this[x(419)]||(this[x(419)]=t);const s=4,o=150,r=performance[x(388)](),d=f=>{const a=x,c=f-r,i=Math[a(424)](c/o,1);e[a(382)].y=t+s*i,i<1?requestAnimationFrame(d):e.position.y=this[a(419)]};requestAnimationFrame(d)}[n(401)]=new V;[n(435)]=[];[n(366)]=4;boxWidth=26;[n(326)]=26;[n(380)]=new L;[n(405)]=0;[n(368)](e){const x=n;this[x(355)]=e}[n(440)](e,x,t){const s=n,o=t?.6:1,r=[{x:0,y:this[s(326)],radius:0},{x:this[s(329)],y:this[s(326)],radius:0},{x:this[s(329)],y:0,radius:0},{x:0,y:0,radius:0}];return e===0?(r[2][s(416)]=4,r[3][s(416)]=4):e===this[s(366)]-1&&(r[0][s(416)]=4,r[1].radius=4),new I({label:String(x)})[s(339)](r,10).fill({color:x,alpha:o})[s(414)]({width:1,color:0})}[n(371)](e,x){const t=n,s=new L({interactive:!0});s[t(382)][t(386)](0,-this.boxHeight);const o=this[t(440)](this[t(405)],x),r=new W({text:e+"x",style:{fontSize:16,fill:0},scale:.5,anchor:.5});r[t(382)].x=this.boxWidth/2,r.position.y=this.boxHeight/2,s[t(338)](o),s[t(338)](r),this[t(380)][t(338)](s),this[t(435)][t(399)](s);let d;s.on(t(418),()=>{const a=t;d=this[a(440)](this[a(405)],0,!0),s.addChild(d)}),s.on(t(394),()=>{const a=t;d&&(s[a(417)](d),d?.destroy(),d=null)}),s.on(t(325),()=>{const a=t;console.log("显示游戏结果事件"),this[a(361)]&&this.recordCallback()}),this[t(405)]++,this.recordCount===4&&(this[t(405)]=1),this[t(435)].forEach((a,c)=>{const i=t,b=c*this[i(326)];if(this.recordArr.length>1){const l=this.recordArr[c],_=l[i(417)](l[i(407)][0]),p=_[i(356)];_[i(392)](),this[i(435)][c][i(338)](this[i(440)](c,Number(p))),this[i(435)][c][i(407)][i(331)]()}new z(a.position,this[i(401)]).to({y:b},200).start()});const f=a=>{const c=t;this.tweenGroup[c(421)](a[c(428)])};if(this[t(435)][t(376)]>this.maxCount){const a=this[t(435)][t(367)]();new z(a[t(382)],this[t(401)]).to({alpha:0},150)[t(439)](()=>{const c=t;this.app[c(441)][c(347)](f),this[c(380)][c(417)](a),a?.[c(392)]()})[t(391)]()}this.app[t(441)][t(324)](f)}}const g=w;(function(h,e){const x=w,t=h();for(;;)try{if(-parseInt(x(482))/1+-parseInt(x(454))/2+-parseInt(x(446))/3*(parseInt(x(447))/4)+parseInt(x(448))/5+parseInt(x(444))/6+-parseInt(x(451))/7*(parseInt(x(485))/8)+parseInt(x(484))/9===e)break;t.push(t.shift())}catch{t.push(t.shift())}})(B,906317);function B(){const h=["characters","value","air","w-full flex justify-center items-center","pins","input-control","init","请输入 10 位路径，仅允许 L 或 R"," 开始游戏 ","test","span","container","off","ballConfig","label","219896sXSIzp","length","33527691JGIRgA","16Nyplln","例如：LRRLLRLR","relative","/10","split","slice","AppPlinko","4834728LCjslQ","button","186PftpDU","84124uNFnhr","5702375CfsNBs","replace","div","5405001swjWHb","2 秒允许点击一次","投球路径（10 位，仅 L/R）","3394282tdQEET","hint-row","counter","仅允许填写字符 L 或 R","target","toUpperCase","path","false","start-btn"," 位，请填写 10 位","aria-invalid","path-help","help"];return B=function(){return h},B()}const t0={class:g(487)},e0={class:"relative"},s0={class:"input-wrap"},a0=[g(464)],i0={class:g(455)},n0={key:0,id:g(465),class:g(466)},c0={class:g(456)},o0={class:g(470)},r0=["disabled"],d0=10;function w(h,e){const x=B();return w=function(t,s){return t=t-442,x[t]},w(h,e)}const l0=T({__name:g(443),setup(h){const e=P(null);let x;const t=P(""),s=N(()=>/^[LR]{10}$/.test(t.value)),o=P(!1),r=N(()=>{const a=w;return t[a(468)]?/[^LR]/[a(476)](t[a(468)])?a(457):t[a(468)].length!==10?"当前 "+t[a(468)][a(483)]+a(463):"":a(474)});function d(a){const c=w,i=a[c(458)],b=i[c(468)][c(459)]()[c(449)](/[^LR]/g,"")[c(442)](0,10);t[c(468)]=b}async function f(){const a=w;if(!s[a(468)]||o[a(468)]||!x)return;o[a(468)]=!0;const c=t.value[a(489)]("");x.createBall(c),setTimeout(()=>o[a(468)]=!1,400)}return q(async()=>{const a=w,c=J.get(10);e[a(468)]&&(x=new x0(e[a(468)]),await x[a(473)](300,276,"#1e1e1e"),await x.createPinsAndResultBoxes(c?.[a(471)]??{rows:12,startY:24,gap:24,pinRadius:4}),x.setBallConfig(c?.[a(480)].radius,c?.[a(480)][a(469)]))}),(a,c)=>{const i=w;return G(),F("div",t0,[m(i(450),e0,[m(i(450),{ref_key:i(478),ref:e,class:i(478)},null,512)]),m("div",s0,[c[1]||(c[1]=m(i(481),{class:i(481),for:"path"},i(453),-1)),Q(m("input",{id:i(460),class:U([i(472),{invalid:!s.value&&t[i(468)]}]),type:"text","onUpdate:modelValue":c[0]||(c[0]=b=>t[i(468)]=b),maxlength:d0,placeholder:i(486),onInput:d,autocomplete:i(479),autocapitalize:i(467),spellcheck:i(461),"aria-describedby":"path-help","aria-invalid":!s[i(468)]},null,42,a0),[[H,t[i(468)]]]),m(i(450),i0,[r[i(468)]?(G(),F(i(477),n0,S(r[i(468)]),1)):Z("",!0),m(i(477),c0,S(t[i(468)].length)+i(488),1)])]),m("div",o0,[m(i(445),{class:i(462),disabled:!s[i(468)]||o.value,onClick:f,title:i(452)},i(475),8,r0)])])}}});function A(){var h=["__scopeId","4iFZQfj","4946264wkUQdG","888raUaJI","10558670RZFrfb","3598EFzOql","4583133wHgZAw","9648KCLBqG","3450780qiIxZN","1668trEiJe","262982zfjHen"];return A=function(){return h},A()}var h0=M;(function(h,e){for(var x=M,t=h();;)try{var s=-parseInt(x(379))/1*(-parseInt(x(388))/2)+-parseInt(x(381))/3*(parseInt(x(385))/4)+parseInt(x(386))/5+parseInt(x(387))/6*(-parseInt(x(383))/7)+parseInt(x(380))/8+parseInt(x(384))/9+-parseInt(x(382))/10;if(s===e)break;t.push(t.shift())}catch{t.push(t.shift())}})(A,430929);function M(h,e){var x=A();return M=function(t,s){t=t-379;var o=x[t];return o},M(h,e)}const u0=Y(l0,[[h0(389),"data-v-cb23dd70"]]);export{u0 as A,Y as _};
