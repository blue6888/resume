import{d as O,r as M,c as S,o as z,a as T,b as D,e as u,w as V,v as Y,n as F,f as q,t as E}from"./vendor-BK4J4gOZ.js";import{A as J,G as g,C as L,B as W}from"./vendor-pixi-js-DOyIQKv_.js";import{m as I,_ as v}from"./vendor-matter-js-Botu7bl-.js";import{G as X,T as H}from"./vendor-tweenjs-BtMkXI7v.js";const U=(h,t)=>{const x=h.__vccOpts||h;for(const[e,s]of t)x[e]=s;return x};function C(h,t){const x=y();return C=function(e,s){return e=e-149,x[e]},C(h,t)}(function(h,t){const x=C,e=h();for(;;)try{if(-parseInt(x(158))/1*(-parseInt(x(154))/2)+parseInt(x(156))/3*(parseInt(x(157))/4)+-parseInt(x(151))/5+-parseInt(x(159))/6*(parseInt(x(153))/7)+parseInt(x(152))/8+-parseInt(x(160))/9*(parseInt(x(150))/10)+parseInt(x(155))/11===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(y,975096);function y(){const h=["4623120XhaVOg","12026248NDlkJy","4382fVcOnU","2tvhVNP","4845885DOSgsp","934452iKekBP","12fDIWiY","773197kzGiIq","7908pbvtVL","603rvKbzP","map","reduce","138310PwpODv"];return y=function(){return h},y()}function Q(){const h=r=>{const d=C,l=r[d(149)]((n,a)=>n+a,0);return r[d(161)](n=>n/l)},t={low:{_10:[8.9,3,1.4,1.1,1,.5,1,1.1,1.4,3,8.9]},middle:{_10:[22,5,2,1.4,.6,.4,.6,1.4,2,5,22]},high:{_10:[76,10,3,.9,.3,.2,.3,.9,3,10,76]}},x={_10:h([1,10,45,120,210,252,210,120,45,10,1])};return{resText:t,probabilities:x,colors:{_10:[1357990,440020,3718648,5195493,9133302,59135,9133302,5195493,3718648,440020,1357990]},shadows:{_10:[1020292,561586,959977,4405450,7153881,42956,7153881,4405450,959977,561586,1020292]}}}const Z=new Map([[10,{pins:{rows:12,startY:24,gap:24,pinRadius:4},ballConfig:{radius:6,air:.12}}]]),i=R;(function(h,t){const x=R,e=h();for(;;)try{if(-parseInt(x(519))/1*(-parseInt(x(496))/2)+parseInt(x(501))/3+parseInt(x(533))/4+parseInt(x(487))/5*(parseInt(x(453))/6)+-parseInt(x(436))/7+parseInt(x(450))/8*(-parseInt(x(461))/9)+parseInt(x(556))/10*(-parseInt(x(522))/11)===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(k,277672);function R(h,t){const x=k();return R=function(e,s){return e=e-436,x[e]},R(h,t)}function k(){const h=["isNaN","label","circleRadius","tweenGroup","clearPinsAndRes","click","collisionStart","appendChild","1263945PNpoAD","popCallback","setVelocity","get","pinAnimal","ball","radius","nonCollideGroup","Engine","14850PHIaUv","getShadow","fill","toFixed","world","1312905WvDyGB","stackBox","Body","startsWith","onComplete","init","split","stage","circle","addChild","dealCollisions","addXPower","children","ticker","ballParamsMap","Ball hit result box ","log","unshift","12nRcdkP","delete","row-","11WGLgzM","pinsMatter","createPinsAndResultBoxes","center","tickerFn","createBall","timing","createRoundedRect","create","remove","removeChild","1975716LORhLw","recordCount","devicePixelRatio","pairs","height","position","push","add","destroy","level","width","scale","roundRect","set","pinsGfx","start","timeScale","recordCallback","now","res-","positionIterations","reverse","min","11463970avxGbH","pop","rows","forEach","gameRes","mouseover","canvas","low","getBg","588112rkhGGA","clear","getText","engine","setLevel","app","setBallConfig","rotation","frictionAir","显示游戏结果事件","runner","stroke","setRecordClickCb","createElement","8JvTSKW","mouseout","Composite","12TCAMQk","resBoxAnimal","res-text-","recordArr","Bodies","addRecord","boxHeight","lastTime","163413bzHxOG","text","startY","getProbability","boxWidth","listenCollisions","setPopCb","style","pinParams","gap","createResultBox","ballConfig","setGameRes","resBoxMap","firstY","ballRadius","angle","maxCount"];return k=function(){return h},k()}const{colors:K,shadows:j,resText:G,probabilities:$}=Q();class x0{id=1;[i(562)];[i(441)];[i(439)];[i(500)];[i(446)];[i(543)];[i(537)];[i(526)];ballParamsMap=new Map;[i(469)]={};[i(494)]=I.Body.nextGroup(!0);[i(472)]={ballRadius:4,frictionAir:.05};[i(488)];recordCallback;[i(560)];constructor(t){const x=i;this.canvas=document[x(449)]("canvas"),t[x(486)](this[x(562)]),this.app=new J,this.engine=v[x(495)][x(530)](),this[x(500)]=this[x(439)].world,this[x(446)]=I.Runner.create(),this[x(439)][x(553)]=10,this.engine.velocityIterations=10,this[x(439)][x(528)][x(549)]=2}async[i(506)](t,x,e){const s=i;this.width=t,this.height=x,this[s(562)][s(468)][s(543)]=t+"px",this.canvas[s(468)][s(537)]=x+"px",this[s(502)][s(538)][s(546)](this.width-45,this[s(537)]/4),this[s(441)][s(508)][s(510)](this[s(502)]),await this[s(441)][s(506)]({canvas:this[s(562)],width:t,height:x,background:e,antialias:!0,resolution:window[s(535)]}),I.Runner.run(this[s(446)],this[s(439)]),this[s(466)]()}[i(442)](t,x){const e=i;this[e(472)]={ballRadius:t,frictionAir:x}}[i(527)](t){const x=i,e=this.width/2,s=[e,e+this[x(469)].gap],r=[e,e-this[x(469)][x(470)]],d=t[0],l=Math.floor(Math.random()*2),_=d==="R"?s[l]:r[l],n=v[x(457)].circle(_,0,this.ballConfig[x(476)],{id:this.id++,label:x(492),mass:1,restitution:0,friction:0,frictionAir:this[x(472)][x(444)],collisionFilter:{group:this[x(494)]}}),a=new g().circle(0,0,this.ballConfig[x(476)])[x(498)](16733525);a[x(538)][x(546)](n.position.x,n[x(538)].y),I.Composite.add(this[x(500)],n),this[x(441)][x(508)].addChild(a);const o=()=>{const f=x;a[f(538)].set(n[f(538)].x,n[f(538)].y),a[f(443)]=n[f(477)];const b=(this[f(469)].rows-2)*this[f(469)][f(470)]+this[f(469)].gap/2;n.position.y>b&&(this.findResultArea(n.position.x),v[f(452)][f(531)](this[f(500)],n),a[f(541)](),this[f(441)][f(514)][f(531)](o),this[f(515)][f(520)](n.id))};this[x(441)][x(514)][x(540)](o);const c={path:t,start:l,fir:d};this[x(515)].set(n.id,c)}[i(523)]=[];[i(547)]=[];[i(524)](t){const x=i;this[x(483)](),this[x(469)]=t;const{rows:e,startY:s,gap:r,pinRadius:d}=t;for(let l=2;l<e;l++){const _=l+1,n=(_-1)*r,a=this[x(543)]/2-n/2;for(let o=0;o<_;o++){const c=a+o*r,f=s+(l-2)*r,b=v[x(457)].circle(c,f,d,{isStatic:!0,label:x(521)+(l-1)+"-"+o}),p=new g()[x(509)](0,0,d).fill(16777215);p.x=c,p.y=f,this[x(523)][x(539)](b),this.pinsGfx.push(p),I.Composite[x(540)](this[x(500)],b),this[x(441)][x(508)][x(510)](p)}}this[x(471)]()}[i(511)](t){const x=i,{bodyA:e,bodyB:s}=t,r=e[x(480)]===x(492)?e:s[x(480)]===x(492)?s:null,d=e.label[x(504)](x(521))?e[x(480)]:s[x(480)][x(504)](x(521))?s[x(480)]:null,l=e.label.startsWith(x(521))?e:s.label.startsWith("row-")?s:null;if(l&&this[x(491)](l),!r||!d)return;const _=r.id,n=Number.parseInt(d[x(507)]("-")[1],10),a=this.ballParamsMap[x(490)](_);if(!a)return;const{path:o,start:c,fir:f}=a;if(!o||!f||Number[x(479)](n))return;if(n===1){const p=f==="R"?c===0?1:-1:c===0?-1.2:1.2;this[x(512)](r,p);return}const b=o[n-1];b==="R"?this[x(512)](r,1.2):b==="L"&&this.addXPower(r,-1.2)}[i(474)]=new Map;[i(542)]=i(563);async[i(471)](){const t=i,x=this[t(469)][t(470)],e=x-2,s=this[t(469)][t(558)]-1,r=s-2,d=this[t(469)][t(463)]+r*x+x/2,l=this[t(543)]/2-s*x/2,_=this[t(469)][t(558)]-2;for(let n=0;n<s;n++){const a=l+n*x+1,o=new L({label:t(552)+n,interactive:!0}),c=new g().roundRect(0,0,e,14,2).fill({color:this[t(564)](_,n)}),f=new g()[t(545)](0,0,e,16,2).fill({color:this[t(497)](_,n)});f[t(538)][t(546)](0,0);const b=this[t(438)](this[t(542)],_,n)||0,p=new W({label:"res-text-"+n,text:b+`
x`,style:{fontSize:14,fill:"#000",align:t(525)},anchor:.5});p[t(538)][t(546)](e/2,8),p[t(544)].set(.4),o[t(510)](f),o[t(510)](c),o[t(510)](p),o.position.set(a,d),this[t(474)].set(n,o),this[t(441)][t(508)].addChild(o),o.on(t(561),()=>{const w=t;this[w(488)](!0,this[w(464)](this[w(469)][w(558)]-2,n)[w(499)](4))}),o.on(t(451),()=>{this[t(488)](!1)})}}[i(483)](){const t=i;for(const x of this[t(523)])v[t(452)][t(531)](this[t(500)],x);for(const x of this[t(547)])x.destroy();this.pinsMatter=[],this[t(547)]=[],this.resBoxMap[t(559)](x=>{x[t(541)]()}),this[t(474)][t(437)](),this[t(475)]=0}addXPower(t,x){const e=i;v[e(503)][e(489)](t,{x,y:0})}[i(564)](t,x){return K["_"+t][x]}getShadow(t,x){return j["_"+t][x]}[i(438)](t,x,e){return G[t]["_"+x][e]}getProbability(t,x){return $["_"+t][x]*100}[i(467)](t){const x=i;this[x(488)]=t}[i(448)](t){const x=i;this[x(550)]=t}[i(440)](t){const x=i;if(this[x(542)]=t,!!G[t])for(const[s,r]of this[x(474)]){const d=r.getChildByLabel(x(455)+s),l=G[t]["_"+(this.pinParams[x(558)]-2)][s];d[x(462)]=l+`
x`}}findResultArea(t){const x=i;for(const[e,s]of this[x(474)].entries()){const r=s.x,d=s.x+s[x(543)];t>=r&&t<=d&&(this.resBoxAnimal(s),console.log(x(516)+e))}}[i(466)](){const t=i;I.Events.on(this[t(439)],t(485),x=>{const e=t;for(const s of x[e(536)])this[e(511)](s)})}[i(491)](t){const x=i,e=new g;e.position.set(t[x(538)].x,t[x(538)].y),this.app[x(508)][x(510)](e);const s=0,r=10,d=400,l=performance[x(551)](),_=n=>{const a=x,o=n-l,c=Math.min(o/d,1),f=s+(r-s)*c,b=.9*(1-c);e[a(437)]();const p=t[a(481)]??4;e[a(509)](0,0,p*1.2+f)[a(498)]({color:16777215,alpha:b}),c<1?requestAnimationFrame(_):e[a(541)]()};requestAnimationFrame(_)}firstY=0;[i(454)](t){const x=i,e=t.position.y;this[x(475)]||(this.firstY=e);const s=4,r=150,d=performance[x(551)](),l=_=>{const n=x,a=_-d,o=Math[n(555)](a/r,1);t[n(538)].y=e+s*o,o<1?requestAnimationFrame(l):t.position.y=this[n(475)]};requestAnimationFrame(l)}[i(482)]=new X;[i(456)]=[];maxCount=4;[i(465)]=26;boxHeight=26;[i(502)]=new L;[i(534)]=0;[i(473)](t){const x=i;this[x(560)]=t}[i(529)](t,x,e){const s=i,r=e?.6:1,d=[{x:0,y:this[s(459)],radius:0},{x:this.boxWidth,y:this[s(459)],radius:0},{x:this[s(465)],y:0,radius:0},{x:0,y:0,radius:0}];return t===0?(d[2].radius=4,d[3].radius=4):t===this[s(478)]-1&&(d[0][s(493)]=4,d[1][s(493)]=4),new g({label:String(x)}).roundShape(d,10).fill({color:x,alpha:r})[s(447)]({width:1,color:0})}[i(458)](t,x){const e=i,s=new L({interactive:!0});s[e(538)][e(546)](0,-this[e(459)]);const r=this[e(529)](this.recordCount,x),d=new W({text:t+"x",style:{fontSize:16,fill:0},scale:.5,anchor:.5});d[e(538)].x=this[e(465)]/2,d[e(538)].y=this.boxHeight/2,s[e(510)](r),s.addChild(d),this[e(502)].addChild(s),this[e(456)][e(518)](s);let l;s.on(e(561),()=>{const n=e;l=this[n(529)](this[n(534)],0,!0),s[n(510)](l)}),s.on(e(451),()=>{const n=e;l&&(s.removeChild(l),l?.[n(541)](),l=null)}),s.on(e(484),()=>{const n=e;console[n(517)](n(445)),this.recordCallback&&this[n(550)]()}),this.recordCount++,this.recordCount===4&&(this[e(534)]=1),this[e(456)].forEach((n,a)=>{const o=e,c=a*this.boxHeight;if(this[o(456)].length>1){const f=this[o(456)][a],b=f[o(532)](f[o(513)][0]),p=b[o(480)];b[o(541)](),this.recordArr[a][o(510)](this[o(529)](a,Number(p))),this[o(456)][a][o(513)][o(554)]()}new H(n.position,this[o(482)]).to({y:c},200)[o(548)]()});const _=n=>{const a=e;this[a(482)].update(n[a(460)])};if(this[e(456)].length>this[e(478)]){const n=this[e(456)][e(557)]();new H(n[e(538)],this[e(482)]).to({alpha:0},150)[e(505)](()=>{const a=e;this[a(441)][a(514)][a(531)](_),this.stackBox.removeChild(n),n?.[a(541)]()})[e(548)]()}this[e(441)][e(514)][e(540)](_)}}const m=B;(function(h,t){const x=B,e=h();for(;;)try{if(-parseInt(x(412))/1*(-parseInt(x(426))/2)+-parseInt(x(392))/3*(parseInt(x(430))/4)+-parseInt(x(382))/5*(parseInt(x(379))/6)+-parseInt(x(420))/7*(-parseInt(x(384))/8)+parseInt(x(407))/9*(parseInt(x(390))/10)+parseInt(x(414))/11*(-parseInt(x(409))/12)+parseInt(x(388))/13*(parseInt(x(417))/14)===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(P,453120);function B(h,t){const x=P();return B=function(e,s){return e=e-379,x[e]},B(h,t)}const t0={class:m(403)},e0={class:"relative"},s0={class:m(413)},a0=[m(399)],i0={class:m(415)},n0={key:0,id:m(395),class:m(419)},o0={class:"counter"},c0={class:"w-full flex justify-center items-center"},r0=[m(424)];function P(){const h=["relative","2 秒允许点击一次","ballConfig","input","81MruDVe","get","24cxPTJO","text","createBall","35vCwEzB","input-wrap","4742056qmiuJr","hint-row","length","17948LOPUfB","span","help","15568ENumSj","input-control","/10","test","disabled","button","28276IPsTDM","#1e1e1e","仅允许填写字符 L 或 R","value","131340NtRBBZ","174dWHOIf","air","投球路径（10 位，仅 L/R）","116570aOwedA","例如：LRRLLRLR","1488MkGIHh","init","createPinsAndResultBoxes","container","13637DpQvSu","path","621090uuDWCa","radius","75coMXmF","AppPlinko","replace","path-help","setBallConfig","start-btn","false","aria-invalid","div"," 开始游戏 ","split"];return P=function(){return h},P()}const d0=10,f0=O({__name:m(393),setup(h){const t=m,x=M(null);let e;const s=M(""),r=S(()=>/^[LR]{10}$/[t(423)](s[t(429)])),d=M(!1),l=S(()=>{const a=t;return s.value?/[^LR]/[a(423)](s[a(429)])?a(428):s[a(429)].length!==10?"当前 "+s.value[a(416)]+" 位，请填写 10 位":"":"请输入 10 位路径，仅允许 L 或 R"});function _(a){const o=t,c=a.target,f=c[o(429)].toUpperCase()[o(394)](/[^LR]/g,"").slice(0,10);s[o(429)]=f}async function n(){const a=t;if(!r.value||d[a(429)]||!e)return;d[a(429)]=!0;const o=s[a(429)][a(402)]("");e[a(411)](o),setTimeout(()=>d[a(429)]=!1,400)}return z(async()=>{const a=t,o=Z[a(408)](10);x[a(429)]&&(e=new x0(x.value),await e[a(385)](300,276,a(427)),await e[a(386)](o?.pins??{rows:12,startY:24,gap:24,pinRadius:4}),e[a(396)](o?.[a(405)][a(391)],o?.ballConfig[a(380)]))}),(a,o)=>{const c=t;return D(),T(c(400),t0,[u(c(400),e0,[u(c(400),{ref_key:c(387),ref:x,class:c(387)},null,512)]),u("div",s0,[o[1]||(o[1]=u("label",{class:"label",for:c(389)},c(381),-1)),V(u(c(406),{id:"path",class:F([c(421),{invalid:!r[c(429)]&&s[c(429)]}]),type:c(410),"onUpdate:modelValue":o[0]||(o[0]=f=>s[c(429)]=f),maxlength:d0,placeholder:c(383),onInput:_,autocomplete:"off",autocapitalize:"characters",spellcheck:c(398),"aria-describedby":c(395),"aria-invalid":!r[c(429)]},null,42,a0),[[Y,s[c(429)]]]),u(c(400),i0,[l[c(429)]?(D(),T(c(418),n0,E(l.value),1)):q("",!0),u(c(418),o0,E(s[c(429)][c(416)])+c(422),1)])]),u(c(400),c0,[u(c(425),{class:c(397),disabled:!r.value||d.value,onClick:n,title:c(404)},c(401),8,r0)])])}}});(function(h,t){for(var x=N,e=h();;)try{var s=parseInt(x(169))/1+-parseInt(x(162))/2+-parseInt(x(165))/3+-parseInt(x(166))/4+parseInt(x(164))/5*(parseInt(x(167))/6)+-parseInt(x(163))/7*(-parseInt(x(168))/8)+-parseInt(x(161))/9;if(s===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(A,168824);function A(){var h=["22284EoiRhk","370864LZrtvm","9982zRZhHM","865ZQoChN","18249MEoYaQ","738820pCPgAk","4962TJNJXW","1216HqCVED","187697YhNpac"];return A=function(){return h},A()}function N(h,t){var x=A();return N=function(e,s){e=e-161;var r=x[e];return r},N(h,t)}const p0=U(f0,[["__scopeId","data-v-cb23dd70"]]);export{p0 as A,U as _};
