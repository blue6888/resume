import{d as Y,r as P,c as E,o as K,a as S,b as T,e as u,w as z,v as D,n as H,f as J,t as N}from"./vendor-q4_JwtHI.js";import{A as j,G as g,C as M,B as V}from"./vendor-pixi-js-CqIIzDVx.js";import{_ as m,m as G}from"./vendor-matter-js-BQ72DKUX.js";import{G as U,T as q}from"./vendor-tweenjs-BtMkXI7v.js";const W=(h,t)=>{const x=h.__vccOpts||h;for(const[e,s]of t)x[e]=s;return x};function y(){const h=["3qdvENm","570120hNlWyF","8390yefCaO","764178xfBywx","756xICGfc","1606gFEPDC","180pTBYpY","9ikiEvJ","406025kyVYGL","3059528pSKmCA","7JLltcJ","113RhxSbd","286442kKEluw"];return y=function(){return h},y()}function F(h,t){const x=y();return F=function(e,s){return e=e-309,x[e]},F(h,t)}(function(h,t){const x=F,e=h();for(;;)try{if(-parseInt(x(316))/1*(parseInt(x(311))/2)+parseInt(x(318))/3*(-parseInt(x(314))/4)+-parseInt(x(313))/5+-parseInt(x(321))/6*(parseInt(x(315))/7)+-parseInt(x(319))/8*(parseInt(x(312))/9)+-parseInt(x(320))/10*(-parseInt(x(310))/11)+parseInt(x(309))/12*(parseInt(x(317))/13)===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(y,455751);function X(){const h=r=>{const d=r.reduce((_,n)=>_+n,0);return r.map(_=>_/d)},t={low:{_10:[8.9,3,1.4,1.1,1,.5,1,1.1,1.4,3,8.9]},middle:{_10:[22,5,2,1.4,.6,.4,.6,1.4,2,5,22]},high:{_10:[76,10,3,.9,.3,.2,.3,.9,3,10,76]}},x={_10:h([1,10,45,120,210,252,210,120,45,10,1])};return{resText:t,probabilities:x,colors:{_10:[1357990,440020,3718648,5195493,9133302,59135,9133302,5195493,3718648,440020,1357990]},shadows:{_10:[1020292,561586,959977,4405450,7153881,42956,7153881,4405450,959977,561586,1020292]}}}const Q=new Map([[10,{pins:{rows:12,startY:24,gap:24,pinRadius:4},ballConfig:{radius:6,air:.12}}]]),i=v;(function(h,t){const x=v,e=h();for(;;)try{if(parseInt(x(184))/1+parseInt(x(177))/2+parseInt(x(178))/3*(-parseInt(x(217))/4)+-parseInt(x(176))/5*(-parseInt(x(226))/6)+parseInt(x(186))/7*(parseInt(x(235))/8)+-parseInt(x(175))/9*(parseInt(x(191))/10)+-parseInt(x(236))/11===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(C,692557);function C(){const h=["clearPinsAndRes","level","setLevel","run","min","boxWidth","position","app","207KbqVdK","195DiiMoB","2538630ClFVxT","47214wTuJdh","firstY","style","getBg","recordCount","get","1071175ZRsGyO","resBoxMap","6193803UDZgMY","Engine","split","width","recordArr","357830zqNKrV","add","circleRadius","pinsMatter","appendChild","floor","gap","resBoxAnimal","frictionAir","create","setRecordClickCb","collisionStart","onComplete","push","children","recordCallback","boxHeight","tickerFn","pop","setGameRes","pinAnimal","stage","delete","Bodies","devicePixelRatio","fill","32gdWOMA","res-text-","row-","mouseover","scale","findResultArea","Composite","click","rows","199296YIyHOD","listenCollisions","#000","getProbability","ballParamsMap","length","clear","label","createElement","8QxZeuI","31672003FzdttB","startsWith","roundShape","removeChild","height","remove","pinParams","createPinsAndResultBoxes","Events","center","log","mouseout","ticker","timeScale","text","createRoundedRect","forEach","toFixed","maxCount","nonCollideGroup","getText","dealCollisions","reverse","getShadow","world","parseInt","ballConfig","setPopCb","Runner","addChild","tweenGroup","Body","createBall","lastTime","set","destroy","runner","timing","gameRes","now","createResultBox","popCallback","start","radius","update","isNaN","pinsGfx","ballRadius","circle","canvas","ball","engine","init","stackBox","addXPower"];return C=function(){return h},C()}function v(h,t){const x=C();return v=function(e,s){return e=e-165,x[e]},v(h,t)}const{colors:Z,shadows:$,resText:L,probabilities:x0}=X();class e0{id=1;[i(285)];[i(174)];[i(287)];[i(260)];runner;[i(189)];[i(240)];[i(208)];[i(230)]=new Map;[i(242)]={};[i(255)]=m[i(267)].nextGroup(!0);[i(262)]={ballRadius:4,frictionAir:.05};popCallback;recordCallback;[i(274)];constructor(t){const x=i;this[x(285)]=document[x(234)](x(285)),t[x(195)](this[x(285)]),this[x(174)]=new j,this[x(287)]=m[x(187)][x(200)](),this[x(260)]=this.engine[x(260)],this[x(272)]=m[x(264)][x(200)](),this[x(287)].positionIterations=10,this.engine.velocityIterations=10,this[x(287)][x(273)][x(249)]=2}async[i(288)](t,x,e){const s=i;this[s(189)]=t,this[s(240)]=x,this[s(285)][s(180)].width=t+"px",this.canvas.style.height=x+"px",this[s(165)][s(173)][s(270)](this[s(189)]-45,this.height/4),this[s(174)][s(212)].addChild(this.stackBox),await this[s(174)][s(288)]({canvas:this[s(285)],width:t,height:x,background:e,antialias:!0,resolution:window[s(215)]}),G.Runner[s(170)](this.runner,this[s(287)]),this[s(227)]()}setBallConfig(t,x){const e=i;this[e(262)]={ballRadius:t,frictionAir:x}}[i(268)](t){const x=i,e=this[x(189)]/2,s=[e,e+this[x(242)][x(197)]],r=[e,e-this.pinParams.gap],d=t[0],l=Math[x(196)](Math.random()*2),_=d==="R"?s[l]:r[l],n=m[x(214)].circle(_,0,this[x(262)][x(283)],{id:this.id++,label:"ball",mass:1,restitution:0,friction:0,frictionAir:this[x(262)][x(199)],collisionFilter:{group:this[x(255)]}}),a=new g()[x(284)](0,0,this.ballConfig[x(283)]).fill(16733525);a.position[x(270)](n[x(173)].x,n[x(173)].y),m[x(223)][x(192)](this[x(260)],n),this[x(174)][x(212)][x(265)](a);const c=()=>{const f=x;a.position.set(n[f(173)].x,n[f(173)].y),a.rotation=n.angle;const b=(this[f(242)][f(225)]-2)*this.pinParams[f(197)]+this.pinParams.gap/2;n[f(173)].y>b&&(this[f(222)](n[f(173)].x),m[f(223)].remove(this[f(260)],n),a[f(271)](),this[f(174)][f(248)][f(241)](c),this[f(230)][f(213)](n.id))};this[x(174)][x(248)].add(c);const o={path:t,start:l,fir:d};this[x(230)][x(270)](n.id,o)}pinsMatter=[];[i(282)]=[];[i(243)](t){const x=i;this[x(167)](),this[x(242)]=t;const{rows:e,startY:s,gap:r,pinRadius:d}=t;for(let l=2;l<e;l++){const _=l+1,n=(_-1)*r,a=this[x(189)]/2-n/2;for(let c=0;c<_;c++){const o=a+c*r,f=s+(l-2)*r,b=m[x(214)][x(284)](o,f,d,{isStatic:!0,label:x(219)+(l-1)+"-"+c}),p=new g()[x(284)](0,0,d).fill(16777215);p.x=o,p.y=f,this[x(194)][x(204)](b),this.pinsGfx[x(204)](p),m[x(223)][x(192)](this[x(260)],b),this[x(174)][x(212)][x(265)](p)}}this.createResultBox()}[i(257)](t){const x=i,{bodyA:e,bodyB:s}=t,r=e[x(233)]===x(286)?e:s[x(233)]===x(286)?s:null,d=e.label[x(237)](x(219))?e[x(233)]:s[x(233)][x(237)](x(219))?s[x(233)]:null,l=e.label[x(237)]("row-")?e:s[x(233)][x(237)](x(219))?s:null;if(l&&this.pinAnimal(l),!r||!d)return;const _=r.id,n=Number[x(261)](d[x(188)]("-")[1],10),a=this[x(230)][x(183)](_);if(!a)return;const{path:c,start:o,fir:f}=a;if(!c||!f||Number[x(281)](n))return;if(n===1){const p=f==="R"?o===0?1:-1:o===0?-1.2:1.2;this.addXPower(r,p);return}const b=c[n-1];b==="R"?this.addXPower(r,1.2):b==="L"&&this[x(166)](r,-1.2)}[i(185)]=new Map;[i(168)]="low";async[i(276)](){const t=i,x=this[t(242)].gap,e=x-2,s=this[t(242)].rows-1,r=s-2,d=this.pinParams.startY+r*x+x/2,l=this.width/2-s*x/2,_=this.pinParams[t(225)]-2;for(let n=0;n<s;n++){const a=l+n*x+1,c=new M({label:"res-"+n,interactive:!0}),o=new g().roundRect(0,0,e,14,2)[t(216)]({color:this[t(181)](_,n)}),f=new g().roundRect(0,0,e,16,2)[t(216)]({color:this[t(259)](_,n)});f[t(173)][t(270)](0,0);const b=this[t(256)](this[t(168)],_,n)||0,p=new V({label:t(218)+n,text:b+`
x`,style:{fontSize:14,fill:t(228),align:t(245)},anchor:.5});p[t(173)][t(270)](e/2,8),p[t(221)][t(270)](.4),c[t(265)](f),c.addChild(o),c[t(265)](p),c[t(173)][t(270)](a,d),this[t(185)].set(n,c),this[t(174)][t(212)][t(265)](c),c.on(t(220),()=>{const I=t;this[I(277)](!0,this[I(229)](this.pinParams[I(225)]-2,n)[I(253)](4))}),c.on(t(247),()=>{this.popCallback(!1)})}}[i(167)](){const t=i;for(const x of this[t(194)])G.Composite.remove(this.world,x);for(const x of this[t(282)])x[t(271)]();this.pinsMatter=[],this.pinsGfx=[],this.resBoxMap[t(252)](x=>{x[t(271)]()}),this[t(185)][t(232)](),this[t(179)]=0}[i(166)](t,x){G.Body.setVelocity(t,{x,y:0})}getBg(t,x){return Z["_"+t][x]}[i(259)](t,x){return $["_"+t][x]}[i(256)](t,x,e){return L[t]["_"+x][e]}[i(229)](t,x){return x0["_"+t][x]*100}[i(263)](t){const x=i;this[x(277)]=t}[i(201)](t){const x=i;this[x(206)]=t}[i(169)](t){const x=i;if(this[x(168)]=t,!!L[t])for(const[s,r]of this[x(185)]){const d=r.getChildByLabel("res-text-"+s),l=L[t]["_"+(this.pinParams.rows-2)][s];d[x(250)]=l+`
x`}}[i(222)](t){const x=i;for(const[e,s]of this.resBoxMap.entries()){const r=s.x,d=s.x+s[x(189)];t>=r&&t<=d&&(this[x(198)](s),console[x(246)]("Ball hit result box "+e))}}[i(227)](){const t=i;m[t(244)].on(this[t(287)],t(202),x=>{for(const e of x.pairs)this.dealCollisions(e)})}[i(211)](t){const x=i,e=new g;e.position.set(t[x(173)].x,t.position.y),this.app[x(212)][x(265)](e);const s=0,r=10,d=400,l=performance[x(275)](),_=n=>{const a=x,c=n-l,o=Math.min(c/d,1),f=s+(r-s)*o,b=.9*(1-o);e[a(232)]();const p=t[a(193)]??4;e[a(284)](0,0,p*1.2+f)[a(216)]({color:16777215,alpha:b}),o<1?requestAnimationFrame(_):e[a(271)]()};requestAnimationFrame(_)}[i(179)]=0;[i(198)](t){const x=i,e=t[x(173)].y;this[x(179)]||(this[x(179)]=e);const s=4,r=150,d=performance.now(),l=_=>{const n=x,a=_-d,c=Math[n(171)](a/r,1);t[n(173)].y=e+s*c,c<1?requestAnimationFrame(l):t[n(173)].y=this[n(179)]};requestAnimationFrame(l)}tweenGroup=new U;[i(190)]=[];[i(254)]=4;[i(172)]=26;boxHeight=26;stackBox=new M;[i(182)]=0;[i(210)](t){this.gameRes=t}[i(251)](t,x,e){const s=i,r=e?.6:1,d=[{x:0,y:this[s(207)],radius:0},{x:this[s(172)],y:this[s(207)],radius:0},{x:this[s(172)],y:0,radius:0},{x:0,y:0,radius:0}];return t===0?(d[2].radius=4,d[3][s(279)]=4):t===this[s(254)]-1&&(d[0][s(279)]=4,d[1][s(279)]=4),new g({label:String(x)})[s(238)](d,10)[s(216)]({color:x,alpha:r}).stroke({width:1,color:0})}addRecord(t,x){const e=i,s=new M({interactive:!0});s[e(173)][e(270)](0,-this[e(207)]);const r=this[e(251)](this.recordCount,x),d=new V({text:t+"x",style:{fontSize:16,fill:0},scale:.5,anchor:.5});d[e(173)].x=this.boxWidth/2,d[e(173)].y=this[e(207)]/2,s[e(265)](r),s[e(265)](d),this[e(165)].addChild(s),this[e(190)].unshift(s);let l;s.on(e(220),()=>{const n=e;l=this[n(251)](this[n(182)],0,!0),s[n(265)](l)}),s.on("mouseout",()=>{const n=e;l&&(s[n(239)](l),l?.[n(271)](),l=null)}),s.on(e(224),()=>{const n=e;console.log("显示游戏结果事件"),this[n(206)]&&this.recordCallback()}),this[e(182)]++,this[e(182)]===4&&(this[e(182)]=1),this[e(190)].forEach((n,a)=>{const c=e,o=a*this[c(207)];if(this.recordArr[c(231)]>1){const f=this[c(190)][a],b=f[c(239)](f[c(205)][0]),p=b.label;b[c(271)](),this[c(190)][a][c(265)](this[c(251)](a,Number(p))),this[c(190)][a][c(205)][c(258)]()}new q(n[c(173)],this[c(266)]).to({y:o},200).start()});const _=n=>{const a=e;this[a(266)][a(280)](n[a(269)])};if(this[e(190)][e(231)]>this[e(254)]){const n=this[e(190)][e(209)]();new q(n[e(173)],this[e(266)]).to({alpha:0},150)[e(203)](()=>{const a=e;this[a(174)][a(248)][a(241)](_),this.stackBox[a(239)](n),n?.[a(271)]()})[e(278)]()}this[e(174)].ticker[e(192)](_)}}const w=k;(function(h,t){const x=k,e=h();for(;;)try{if(parseInt(x(505))/1+parseInt(x(538))/2+parseInt(x(501))/3*(-parseInt(x(509))/4)+-parseInt(x(500))/5*(parseInt(x(532))/6)+-parseInt(x(516))/7+-parseInt(x(517))/8*(-parseInt(x(514))/9)+-parseInt(x(539))/10*(parseInt(x(499))/11)===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(R,450416);function R(){const h=["请输入 10 位路径，仅允许 L 或 R","span","test","div","split","get","6DwyhcU","input-control","path","radius","off","help","1296550gIXcAP","38530mVBeVi","air"," 开始游戏 ","disabled","value","例如：LRRLLRLR","input-wrap","hint-row","ballConfig","relative","toUpperCase","container","495jQKrhX","1048625anGnBJ","1869171UuWhSA","#1e1e1e","aria-invalid","/10","337565cnotsQ","input","button","2 秒允许点击一次","4jnRKOH","counter","path-help","false","pins","9NToFdq"," 位，请填写 10 位","696745MUbjzH","4562224JdXgHz","createBall","label","length","text","仅允许填写字符 L 或 R","slice","characters","投球路径（10 位，仅 L/R）"];return R=function(){return h},R()}const t0={class:w(496)},s0={class:w(496)},a0={class:w(493)},i0=[w(503)],n0={class:w(494)},c0={key:0,id:"path-help",class:w(537)},o0={class:w(510)},r0={class:"w-full flex justify-center items-center"},d0=[w(490)];function k(h,t){const x=R();return k=function(e,s){return e=e-489,x[e]},k(h,t)}const f0=10,l0=Y({__name:"AppPlinko",setup(h){const t=w,x=P(null);let e;const s=P(""),r=E(()=>/^[LR]{10}$/.test(s[t(491)])),d=P(!1),l=E(()=>{const a=t;return s.value?/[^LR]/[a(528)](s.value)?a(522):s.value.length!==10?"当前 "+s[a(491)][a(520)]+a(515):"":a(526)});function _(a){const c=t,o=a.target,f=o[c(491)][c(497)]().replace(/[^LR]/g,"")[c(523)](0,10);s[c(491)]=f}async function n(){const a=t;if(!r[a(491)]||d[a(491)]||!e)return;d[a(491)]=!0;const c=s.value[a(530)]("");e[a(518)](c),setTimeout(()=>d[a(491)]=!1,400)}return K(async()=>{const a=t,c=Q[a(531)](10);x.value&&(e=new e0(x[a(491)]),await e.init(300,276,a(502)),await e.createPinsAndResultBoxes(c?.[a(513)]??{rows:12,startY:24,gap:24,pinRadius:4}),e.setBallConfig(c?.ballConfig[a(535)],c?.[a(495)][a(540)]))}),(a,c)=>{const o=t;return T(),S(o(529),t0,[u(o(529),s0,[u(o(529),{ref_key:o(498),ref:x,class:o(498)},null,512)]),u(o(529),a0,[c[1]||(c[1]=u(o(519),{class:o(519),for:"path"},o(525),-1)),z(u(o(506),{id:o(534),class:H([o(533),{invalid:!r[o(491)]&&s[o(491)]}]),type:o(521),"onUpdate:modelValue":c[0]||(c[0]=f=>s[o(491)]=f),maxlength:f0,placeholder:o(492),onInput:_,autocomplete:o(536),autocapitalize:o(524),spellcheck:o(512),"aria-describedby":o(511),"aria-invalid":!r[o(491)]},null,42,i0),[[D,s[o(491)]]]),u(o(529),n0,[l[o(491)]?(T(),S(o(527),c0,N(l.value),1)):J("",!0),u(o(527),o0,N(s[o(491)][o(520)])+o(504),1)])]),u(o(529),r0,[u(o(507),{class:"start-btn",disabled:!r.value||d[o(491)],onClick:n,title:o(508)},o(489),8,d0)])])}}});var O=B;(function(h,t){for(var x=B,e=h();;)try{var s=-parseInt(x(418))/1+parseInt(x(417))/2+-parseInt(x(414))/3+-parseInt(x(416))/4+-parseInt(x(421))/5*(parseInt(x(423))/6)+-parseInt(x(419))/7+parseInt(x(422))/8;if(s===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(A,633313);function B(h,t){var x=A();return B=function(e,s){e=e-414;var r=x[e];return r},B(h,t)}function A(){var h=["4987165EKFHqx","25596672lORMRo","6GAQNsi","3494688xAEdke","__scopeId","3278552cKRBLf","1942650VSsVOD","472730JbbjOO","580293wjvqiu","data-v-cb23dd70"];return A=function(){return h},A()}const u0=W(l0,[[O(415),O(420)]]);export{u0 as A,W as _};
