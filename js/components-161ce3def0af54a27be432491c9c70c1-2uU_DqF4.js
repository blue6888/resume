import{d as V,r as P,c as E,o as N,a as T,b as Y,e as b,w as H,v as X,n as J,f as U,t as z}from"./vendor-BK4J4gOZ.js";import{A as W,G as w,C as S,B as q}from"./vendor-pixi-js-DOyIQKv_.js";import{_ as m,m as C}from"./vendor-matter-js-Botu7bl-.js";import{G as j,T as F}from"./vendor-tweenjs-BtMkXI7v.js";const D=(h,t)=>{const x=h.__vccOpts||h;for(const[e,s]of t)x[e]=s;return x};function y(h,t){const x=R();return y=function(e,s){return e=e-201,x[e]},y(h,t)}(function(h,t){const x=y,e=h();for(;;)try{if(-parseInt(x(211))/1+-parseInt(x(202))/2*(parseInt(x(206))/3)+parseInt(x(212))/4*(parseInt(x(210))/5)+-parseInt(x(213))/6*(-parseInt(x(204))/7)+parseInt(x(208))/8*(parseInt(x(203))/9)+parseInt(x(205))/10+-parseInt(x(214))/11*(parseInt(x(209))/12)===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(R,864136);function R(){const h=["55272rnECkx","10ynIfsb","1584559QLzCbq","3015404EXVmSd","7847832QkXrGI","2816LTjOSz","map","1902lemApB","6426AbDqmw","7YxOYST","2583690CFnbbJ","2742SLXLnn","reduce","15944mHytgJ"];return R=function(){return h},R()}function O(){const h=c=>{const d=y,l=c[d(207)]((a,i)=>a+i,0);return c[d(201)](a=>a/l)},t={low:{_10:[8.9,3,1.4,1.1,1,.5,1,1.1,1.4,3,8.9]},middle:{_10:[22,5,2,1.4,.6,.4,.6,1.4,2,5,22]},high:{_10:[76,10,3,.9,.3,.2,.3,.9,3,10,76]}},x={_10:h([1,10,45,120,210,252,210,120,45,10,1])};return{resText:t,probabilities:x,colors:{_10:[1357990,440020,3718648,5195493,9133302,59135,9133302,5195493,3718648,440020,1357990]},shadows:{_10:[1020292,561586,959977,4405450,7153881,42956,7153881,4405450,959977,561586,1020292]}}}const Q=new Map([[10,{pins:{rows:12,startY:24,gap:24,pinRadius:4},ballConfig:{radius:6,air:.12}}]]),o=v;function v(h,t){const x=k();return v=function(e,s){return e=e-282,x[e]},v(h,t)}(function(h,t){const x=v,e=h();for(;;)try{if(parseInt(x(399))/1+parseInt(x(287))/2*(-parseInt(x(367))/3)+parseInt(x(373))/4+-parseInt(x(356))/5+parseInt(x(408))/6*(parseInt(x(293))/7)+-parseInt(x(337))/8*(-parseInt(x(328))/9)+-parseInt(x(308))/10*(parseInt(x(384))/11)===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(k,328151);function k(){const h=["lastTime","position","height","text","setGameRes","setVelocity","init","log","rotation","pop","startY","gap","70vRdWxz","createResultBox","forEach","setLevel","center","mouseover","ballConfig","click","stage","get","removeChild","app","dealCollisions","toFixed","angle","gameRes","tweenGroup","add","timing","getProbability","3762wegNwH","length","setBallConfig","clearPinsAndRes","addRecord","boxHeight","radius","resBoxMap","pinAnimal","3152yAizmg","circle","popCallback","run","level","rows","create","clear","res-","resBoxAnimal","listenCollisions","fill","min","frictionAir","runner","ticker","Body","mouseout","setPopCb","2629705JogGjM","findResultArea","roundRect","devicePixelRatio","maxCount","res-text-","start","createBall","nonCollideGroup","Composite","firstY","90kdsiRM","createRoundedRect","Bodies","recordCount","boxWidth","stackBox","2421200EMnqcS","addXPower","addChild","setRecordClickCb","tickerFn","update","recordCallback","remove","destroy","engine","ballRadius","533137nXUktS","显示游戏结果事件","collisionStart","pinsGfx","recordArr","canvas","pinsMatter","velocityIterations","Ball hit result box ","parseInt","world","positionIterations","row-","Events","set","100438GSRLrJ","scale","pairs","circleRadius","getBg","low","unshift","now","#000","6ddlSvu","children","appendChild","onComplete","ballParamsMap","ball","19598AjrzTq","width","startsWith","floor","style","label","4318307pTVSlJ","getText","pinParams"];return k=function(){return h},k()}const{colors:Z,shadows:K,resText:G,probabilities:$}=O();class x0{id=1;canvas;[o(319)];[o(382)];[o(394)];[o(351)];[o(288)];[o(298)];[o(377)];ballParamsMap=new Map;pinParams={};nonCollideGroup=m[o(353)].nextGroup(!0);[o(314)]={ballRadius:4,frictionAir:.05};[o(339)];[o(379)];[o(323)];constructor(t){const x=o;this[x(389)]=document.createElement(x(389)),t[x(283)](this[x(389)]),this.app=new W,this[x(382)]=C.Engine[x(343)](),this.world=this[x(382)].world,this.runner=C.Runner[x(343)](),this[x(382)][x(395)]=10,this[x(382)][x(391)]=10,this[x(382)][x(326)].timeScale=2}async[o(302)](t,x,e){const s=o;this.width=t,this.height=x,this[s(389)].style[s(288)]=t+"px",this[s(389)][s(291)].height=x+"px",this.stackBox.position.set(this[s(288)]-45,this[s(298)]/4),this[s(319)][s(316)].addChild(this[s(372)]),await this[s(319)].init({canvas:this[s(389)],width:t,height:x,background:e,antialias:!0,resolution:window[s(359)]}),C.Runner[s(340)](this[s(351)],this.engine),this[s(347)]()}[o(330)](t,x){const e=o;this[e(314)]={ballRadius:t,frictionAir:x}}[o(363)](t){const x=o,e=this[x(288)]/2,s=[e,e+this.pinParams.gap],c=[e,e-this[x(295)][x(307)]],d=t[0],l=Math[x(290)](Math.random()*2),_=d==="R"?s[l]:c[l],a=C.Bodies[x(338)](_,0,this[x(314)].ballRadius,{id:this.id++,label:x(286),mass:1,restitution:0,friction:0,frictionAir:this.ballConfig[x(350)],collisionFilter:{group:this[x(364)]}}),i=new w()[x(338)](0,0,this.ballConfig[x(383)])[x(348)](16733525);i[x(297)][x(398)](a.position.x,a.position.y),m[x(365)][x(325)](this[x(394)],a),this.app[x(316)][x(375)](i);const n=()=>{const f=x;i[f(297)].set(a[f(297)].x,a.position.y),i[f(304)]=a[f(322)];const p=(this[f(295)].rows-2)*this[f(295)][f(307)]+this[f(295)][f(307)]/2;a.position.y>p&&(this.findResultArea(a.position.x),m[f(365)][f(380)](this[f(394)],a),i[f(381)](),this.app[f(352)][f(380)](n),this[f(285)].delete(a.id))};this[x(319)][x(352)][x(325)](n);const r={path:t,start:l,fir:d};this.ballParamsMap[x(398)](a.id,r)}pinsMatter=[];[o(387)]=[];createPinsAndResultBoxes(t){const x=o;this[x(331)](),this[x(295)]=t;const{rows:e,startY:s,gap:c,pinRadius:d}=t;for(let l=2;l<e;l++){const _=l+1,a=(_-1)*c,i=this[x(288)]/2-a/2;for(let n=0;n<_;n++){const r=i+n*c,f=s+(l-2)*c,p=m[x(369)].circle(r,f,d,{isStatic:!0,label:x(396)+(l-1)+"-"+n}),u=new w()[x(338)](0,0,d)[x(348)](16777215);u.x=r,u.y=f,this[x(390)].push(p),this[x(387)].push(u),m[x(365)].add(this[x(394)],p),this[x(319)][x(316)][x(375)](u)}}this[x(309)]()}[o(320)](t){const x=o,{bodyA:e,bodyB:s}=t,c=e[x(292)]==="ball"?e:s[x(292)]===x(286)?s:null,d=e.label[x(289)](x(396))?e[x(292)]:s.label.startsWith("row-")?s.label:null,l=e[x(292)].startsWith(x(396))?e:s[x(292)][x(289)](x(396))?s:null;if(l&&this[x(336)](l),!c||!d)return;const _=c.id,a=Number[x(393)](d.split("-")[1],10),i=this[x(285)][x(317)](_);if(!i)return;const{path:n,start:r,fir:f}=i;if(!n||!f||Number.isNaN(a))return;if(a===1){const u=f==="R"?r===0?1:-1:r===0?-1.2:1.2;this[x(374)](c,u);return}const p=n[a-1];p==="R"?this[x(374)](c,1.2):p==="L"&&this[x(374)](c,-1.2)}[o(335)]=new Map;[o(341)]=o(404);async[o(309)](){const t=o,x=this.pinParams[t(307)],e=x-2,s=this[t(295)][t(342)]-1,c=s-2,d=this[t(295)][t(306)]+c*x+x/2,l=this[t(288)]/2-s*x/2,_=this[t(295)][t(342)]-2;for(let a=0;a<s;a++){const i=l+a*x+1,n=new S({label:t(345)+a,interactive:!0}),r=new w().roundRect(0,0,e,14,2)[t(348)]({color:this[t(403)](_,a)}),f=new w()[t(358)](0,0,e,16,2)[t(348)]({color:this.getShadow(_,a)});f.position[t(398)](0,0);const p=this[t(294)](this[t(341)],_,a)||0,u=new q({label:t(361)+a,text:p+`
x`,style:{fontSize:14,fill:t(407),align:t(312)},anchor:.5});u.position[t(398)](e/2,8),u[t(400)].set(.4),n.addChild(f),n[t(375)](r),n.addChild(u),n[t(297)][t(398)](i,d),this[t(335)][t(398)](a,n),this[t(319)][t(316)][t(375)](n),n.on(t(313),()=>{const I=t;this[I(339)](!0,this.getProbability(this[I(295)][I(342)]-2,a)[I(321)](4))}),n.on(t(354),()=>{this[t(339)](!1)})}}[o(331)](){const t=o;for(const x of this.pinsMatter)C.Composite.remove(this[t(394)],x);for(const x of this[t(387)])x[t(381)]();this.pinsMatter=[],this.pinsGfx=[],this[t(335)][t(310)](x=>{x.destroy()}),this[t(335)][t(344)](),this.firstY=0}[o(374)](t,x){const e=o;m[e(353)][e(301)](t,{x,y:0})}[o(403)](t,x){return Z["_"+t][x]}getShadow(t,x){return K["_"+t][x]}[o(294)](t,x,e){return G[t]["_"+x][e]}[o(327)](t,x){return $["_"+t][x]*100}[o(355)](t){const x=o;this[x(339)]=t}[o(376)](t){const x=o;this[x(379)]=t}[o(311)](t){const x=o;if(this[x(341)]=t,!!G[t])for(const[s,c]of this.resBoxMap){const d=c.getChildByLabel("res-text-"+s),l=G[t]["_"+(this[x(295)].rows-2)][s];d[x(299)]=l+`
x`}}[o(357)](t){const x=o;for(const[e,s]of this[x(335)].entries()){const c=s.x,d=s.x+s.width;t>=c&&t<=d&&(this[x(346)](s),console[x(303)](x(392)+e))}}listenCollisions(){const t=o;m[t(397)].on(this.engine,t(386),x=>{const e=t;for(const s of x[e(401)])this[e(320)](s)})}[o(336)](t){const x=o,e=new w;e[x(297)][x(398)](t[x(297)].x,t[x(297)].y),this[x(319)][x(316)][x(375)](e);const s=0,c=10,d=400,l=performance[x(406)](),_=a=>{const i=x,n=a-l,r=Math[i(349)](n/d,1),f=s+(c-s)*r,p=.9*(1-r);e[i(344)]();const u=t[i(402)]??4;e.circle(0,0,u*1.2+f).fill({color:16777215,alpha:p}),r<1?requestAnimationFrame(_):e[i(381)]()};requestAnimationFrame(_)}[o(366)]=0;resBoxAnimal(t){const x=o,e=t[x(297)].y;this[x(366)]||(this[x(366)]=e);const s=4,c=150,d=performance[x(406)](),l=_=>{const a=x,i=_-d,n=Math[a(349)](i/c,1);t[a(297)].y=e+s*n,n<1?requestAnimationFrame(l):t.position.y=this[a(366)]};requestAnimationFrame(l)}tweenGroup=new j;[o(388)]=[];maxCount=4;[o(371)]=26;[o(333)]=26;stackBox=new S;[o(370)]=0;[o(300)](t){this.gameRes=t}[o(368)](t,x,e){const s=o,c=e?.6:1,d=[{x:0,y:this[s(333)],radius:0},{x:this[s(371)],y:this.boxHeight,radius:0},{x:this[s(371)],y:0,radius:0},{x:0,y:0,radius:0}];return t===0?(d[2][s(334)]=4,d[3][s(334)]=4):t===this[s(360)]-1&&(d[0][s(334)]=4,d[1][s(334)]=4),new w({label:String(x)}).roundShape(d,10)[s(348)]({color:x,alpha:c}).stroke({width:1,color:0})}[o(332)](t,x){const e=o,s=new S({interactive:!0});s[e(297)][e(398)](0,-this[e(333)]);const c=this.createRoundedRect(this.recordCount,x),d=new q({text:t+"x",style:{fontSize:16,fill:0},scale:.5,anchor:.5});d[e(297)].x=this[e(371)]/2,d[e(297)].y=this.boxHeight/2,s[e(375)](c),s.addChild(d),this[e(372)].addChild(s),this[e(388)][e(405)](s);let l;s.on(e(313),()=>{const a=e;l=this[a(368)](this[a(370)],0,!0),s.addChild(l)}),s.on("mouseout",()=>{const a=e;l&&(s[a(318)](l),l?.[a(381)](),l=null)}),s.on(e(315),()=>{const a=e;console.log(a(385)),this.recordCallback&&this[a(379)]()}),this[e(370)]++,this[e(370)]===4&&(this[e(370)]=1),this.recordArr[e(310)]((a,i)=>{const n=e,r=i*this[n(333)];if(this[n(388)][n(329)]>1){const f=this[n(388)][i],p=f[n(318)](f[n(282)][0]),u=p[n(292)];p[n(381)](),this[n(388)][i][n(375)](this[n(368)](i,Number(u))),this.recordArr[i].children.reverse()}new F(a[n(297)],this[n(324)]).to({y:r},200)[n(362)]()});const _=a=>{const i=e;this[i(324)][i(378)](a[i(296)])};if(this.recordArr[e(329)]>this[e(360)]){const a=this[e(388)][e(305)]();new F(a[e(297)],this[e(324)]).to({alpha:0},150)[e(284)](()=>{const i=e;this[i(319)][i(352)][i(380)](_),this[i(372)][i(318)](a),a?.[i(381)]()})[e(362)]()}this[e(319)][e(352)][e(325)](_)}}const g=A;(function(h,t){const x=A,e=h();for(;;)try{if(parseInt(x(226))/1+parseInt(x(221))/2+parseInt(x(225))/3+parseInt(x(249))/4+parseInt(x(237))/5*(parseInt(x(222))/6)+-parseInt(x(242))/7+-parseInt(x(256))/8*(parseInt(x(240))/9)===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(B,548879);function A(h,t){const x=B();return A=function(e,s){return e=e-212,x[e]},A(h,t)}function B(){const h=["off","input-wrap","relative","toUpperCase","110488fLAYLU","false","path-help","get","例如：LRRLLRLR","w-full flex justify-center items-center","input","投球路径（10 位，仅 L/R）","createBall","test","ballConfig","createPinsAndResultBoxes","slice","请输入 10 位路径，仅允许 L 或 R","1055664akkEYf","42TuEHHJ","init","target","2762634mEYbmA","283199pfrezl"," 开始游戏 ","text","AppPlinko","path","start-btn","hint-row","container","length","label","button","173165jZJgIU","#1e1e1e","仅允许填写字符 L 或 R","747QUaxsg","value","7283878ugsPnn","disabled"," 位，请填写 10 位","setBallConfig","replace","div","radius","3045624AgkuEq","当前 ","span"];return B=function(){return h},B()}const t0={class:"relative"},e0={class:g(254)},s0={class:g(253)},i0=["aria-invalid"],a0={class:g(232)},n0={key:0,id:"path-help",class:"help"},o0={class:"counter"},r0={class:g(212)},c0=[g(243)],d0=10,f0=V({__name:g(229),setup(h){const t=g,x=P(null);let e;const s=P(""),c=E(()=>/^[LR]{10}$/[t(216)](s[t(241)])),d=P(!1),l=E(()=>{const i=t;return s.value?/[^LR]/[i(216)](s[i(241)])?i(239):s[i(241)][i(234)]!==10?i(250)+s[i(241)].length+i(244):"":i(220)});function _(i){const n=t,r=i[n(224)],f=r[n(241)][n(255)]()[n(246)](/[^LR]/g,"")[n(219)](0,10);s[n(241)]=f}async function a(){const i=t;if(!c[i(241)]||d.value||!e)return;d[i(241)]=!0;const n=s[i(241)].split("");e[i(215)](n),setTimeout(()=>d[i(241)]=!1,400)}return N(async()=>{const i=t,n=Q[i(259)](10);x[i(241)]&&(e=new x0(x[i(241)]),await e[i(223)](300,276,i(238)),await e[i(218)](n?.pins??{rows:12,startY:24,gap:24,pinRadius:4}),e[i(245)](n?.ballConfig[i(248)],n?.[i(217)].air))}),(i,n)=>{const r=t;return Y(),T(r(247),t0,[b(r(247),e0,[b(r(247),{ref_key:r(233),ref:x,class:r(233)},null,512)]),b(r(247),s0,[n[1]||(n[1]=b(r(235),{class:r(235),for:r(230)},r(214),-1)),H(b(r(213),{id:r(230),class:J(["input-control",{invalid:!c[r(241)]&&s[r(241)]}]),type:r(228),"onUpdate:modelValue":n[0]||(n[0]=f=>s[r(241)]=f),maxlength:d0,placeholder:r(260),onInput:_,autocomplete:r(252),autocapitalize:"characters",spellcheck:r(257),"aria-describedby":r(258),"aria-invalid":!c.value},null,42,i0),[[X,s[r(241)]]]),b("div",a0,[l[r(241)]?(Y(),T(r(251),n0,z(l[r(241)]),1)):U("",!0),b("span",o0,z(s[r(241)][r(234)])+"/10",1)])]),b("div",r0,[b(r(236),{class:r(231),disabled:!c[r(241)]||d[r(241)],onClick:a,title:"2 秒允许点击一次"},r(227),8,c0)])])}}});function M(){var h=["618055LYeclE","17730000dvbrrq","11GmnKVS","18StWmXV","__scopeId","14pBHxgl","1670874XvDzbe","4686856IRSUcr","40hdxaiv","732835VZPxVN","6oClGRb","14443870RXMbPg","3676695CEvFhd"];return M=function(){return h},M()}var l0=L;function L(h,t){var x=M();return L=function(e,s){e=e-130;var c=x[e];return c},L(h,t)}(function(h,t){for(var x=L,e=h();;)try{var s=parseInt(x(132))/1*(parseInt(x(142))/2)+parseInt(x(131))/3+-parseInt(x(140))/4*(parseInt(x(141))/5)+parseInt(x(138))/6*(parseInt(x(137))/7)+parseInt(x(139))/8*(-parseInt(x(135))/9)+-parseInt(x(130))/10*(-parseInt(x(134))/11)+-parseInt(x(133))/12;if(s===t)break;e.push(e.shift())}catch{e.push(e.shift())}})(M,966191);const b0=D(f0,[[l0(136),"data-v-cb23dd70"]]);export{b0 as A,D as _};
